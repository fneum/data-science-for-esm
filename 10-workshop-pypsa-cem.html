
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Capacity Expansion Planning with pypsa &#8212; Data Science for Energy System Modelling</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=384b581d" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=36754332"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = '10-workshop-pypsa-cem';</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Preparation for Group Assignment" href="11-workshop-groupwork.html" />
    <link rel="prev" title="Introduction to pypsa" href="09-workshop-pypsa.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/logo.png" class="logo__image only-light" alt="Data Science for Energy System Modelling - Home"/>
    <script>document.write(`<img src="_static/logo.png" class="logo__image only-dark" alt="Data Science for Energy System Modelling - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Welcome
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="01-workshop-python.html">Introduction to <code class="docutils literal notranslate"><span class="pre">Python</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="02-workshop-numpy.html">Introduction to <code class="docutils literal notranslate"><span class="pre">numpy</span></code> and <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="03-workshop-pandas.html">Introduction to <code class="docutils literal notranslate"><span class="pre">pandas</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="04-workshop-geopandas.html">Introduction to <code class="docutils literal notranslate"><span class="pre">geopandas</span></code> and <code class="docutils literal notranslate"><span class="pre">cartopy</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="06-workshop-atlite.html">Introduction to <code class="docutils literal notranslate"><span class="pre">rasterio</span></code> and <code class="docutils literal notranslate"><span class="pre">atlite</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="05-workshop-pysheds.html">Introduction to <code class="docutils literal notranslate"><span class="pre">pysheds</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="07-workshop-networkx.html">Introduction to <code class="docutils literal notranslate"><span class="pre">networkx</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="08-workshop-pyomo.html">Introduction to <code class="docutils literal notranslate"><span class="pre">pyomo</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="09-workshop-pypsa.html">Introduction to <code class="docutils literal notranslate"><span class="pre">pypsa</span></code></a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Capacity Expansion Planning with <code class="docutils literal notranslate"><span class="pre">pypsa</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="11-workshop-groupwork.html">Preparation for Group Assignment</a></li>
<li class="toctree-l1"><a class="reference internal" href="12-workshop-pypsa-sector-coupling.html">Sector-Coupling with <code class="docutils literal notranslate"><span class="pre">pypsa</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="13-workshop-interactive-visualisation.html">Interactive Visualisation and Dashboards</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://colab.research.google.com/github/fneum/data-science-for-esm/blob/main/data-science-for-esm/10-workshop-pypsa-cem.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onColab"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="_static/images/logo_colab.png">
  </span>
<span class="btn__text-container">Colab</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/fneum/data-science-for-esm" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/fneum/data-science-for-esm/issues/new?title=Issue%20on%20page%20%2F10-workshop-pypsa-cem.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/10-workshop-pypsa-cem.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Capacity Expansion Planning with pypsa</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#from-electricity-market-modelling-to-capacity-expansion-planning">From electricity market modelling to capacity expansion planning</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#prerequisites-handling-technology-data-and-costs">Prerequisites: handling technology data and costs</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#loading-time-series-data">Loading time series data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#simple-capacity-expansion-planning-example">Simple capacity expansion planning example</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#model-initialisation">Model Initialisation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-components">Adding Components</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#model-run">Model Run</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#model-evaluation">Model Evaluation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#plotting-optimal-dispatch">Plotting Optimal Dispatch</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-storage-units">Adding Storage Units</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-emission-limits">Adding emission limits</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#sensitivity-analysis">Sensitivity Analysis</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exercises">Exercises</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="capacity-expansion-planning-with-pypsa">
<h1>Capacity Expansion Planning with <code class="docutils literal notranslate"><span class="pre">pypsa</span></code><a class="headerlink" href="#capacity-expansion-planning-with-pypsa" title="Link to this heading">#</a></h1>
<img src="https://github.com/fneum/data-science-for-esm/raw/main/data-science-for-esm/pypsa-logo.png" width="300px" /><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Also in this tutorial, you might want to refer to the PyPSA documentation: <a class="reference external" href="https://pypsa.readthedocs.io">https://pypsa.readthedocs.io</a>.</p>
</div>
<section id="from-electricity-market-modelling-to-capacity-expansion-planning">
<h2>From electricity market modelling to capacity expansion planning<a class="headerlink" href="#from-electricity-market-modelling-to-capacity-expansion-planning" title="Link to this heading">#</a></h2>
<p>Review the problem formulation of the electricity market model. Below you can find an adapted version
where the capacity limits have been promoted to <strong>decision variables</strong> with corresponding terms
in the <em>objective function</em> and <em>new constraints for their expansion limits</em> (e.g. wind and solar potentials). This is known as <strong>capacity expansion problem</strong>.</p>
<div class="amsmath math notranslate nohighlight">
\[\begin{equation*}
    \min_{g,e,f,G,E,F} \quad \sum_{i,s,t} w_t o_{s} g_{i,s,t} + \sum_{i,s} c_sG_{i,s}  + c_{r,\text{dis/charge}}G_{i,r, \text{dis/charge}} +   c_{r}E_{i,r}  + c_\ell F_{\ell}
  \end{equation*}\]</div>
<p>such that</p>
<div class="amsmath math notranslate nohighlight">
\[\begin{align*}
    d_{i,t} &amp;= \sum_s g_{i,s,t}  - \sum_\ell K_{i\ell} f_{\ell,t}   &amp; \text{energy balance} \\
    0 &amp;\leq g_{i,s,t} \leq \hat{g}_{i,s,t} G_{i,s} &amp; \text{generator limits}\\
    0 &amp; \leq g_{i,r,t,\text{dis/charge}} \leq G_{i,r,\text{dis/charge}}&amp; \text{storage dis/charge limits} \\
    0 &amp; \leq e_{i,r,t} \leq E_{r} &amp; \text{storage energy limits} \\ 
    e_{i,r,t} &amp;= \eta^0_{i,r,t} e_{i,r,t-1} + \eta^1_{r}g_{i,r,t,\text{charge}} -  \frac{1}{\eta^2_{r}} g_{i,r,t,\text{discharge}} &amp; \text{storage consistency} \\
    -F_\ell &amp;\leq f_{\ell,t} \leq F_\ell  &amp; \text{line limits} \\
    0 &amp;= \sum_\ell C_{\ell c} x_\ell f_{\ell,t} &amp; \text{KVL} \\
        \underline{G}_{i,s} &amp; \leq G_{i,s} \leq \overline{G}_{i,s} &amp; \text{generator capacity expansion limits} \\
    \underline{G}_{i,r, \text{dis/charge}} &amp; \leq G_{i,r, \text{dis/charge}} \leq \overline{G}_{i,r, \text{dis/charge}} &amp; \text{storage power capacity expansion limits} \\
    \underline{E}_{i,r} &amp; \leq E_{i,r} \leq \overline{E}_{i,r} &amp; \text{storage energy expansion limits} \\
    \underline{F}_{\ell} &amp; \leq F_{\ell} \leq \overline{F}_{\ell} &amp; \text{line capacity expansion limits}
  \end{align*}\]</div>
<p><strong>New decision variables for capacity expansion planning:</strong></p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(G_{i,s}\)</span> is the generator capacity at bus <span class="math notranslate nohighlight">\(i\)</span>, technology <span class="math notranslate nohighlight">\(s\)</span>,</p></li>
<li><p><span class="math notranslate nohighlight">\(F_{\ell}\)</span> is the transmission capacity of line <span class="math notranslate nohighlight">\(\ell\)</span>,</p></li>
<li><p><span class="math notranslate nohighlight">\(G_{i,r,\text{dis-/charge}}\)</span> denotes the charge and discharge capacities of storage unit <span class="math notranslate nohighlight">\(r\)</span> at bus <span class="math notranslate nohighlight">\(i\)</span>,</p></li>
<li><p><span class="math notranslate nohighlight">\(E_{i,r}\)</span> is the energy capacity of storage <span class="math notranslate nohighlight">\(r\)</span> at bus <span class="math notranslate nohighlight">\(i\)</span> and time step <span class="math notranslate nohighlight">\(t\)</span>.</p></li>
</ul>
<p><strong>New parameters for capacity expansion planning:</strong></p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(c_{\star}\)</span> is the capital cost of technology <span class="math notranslate nohighlight">\(\star\)</span> at bus <span class="math notranslate nohighlight">\(i\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(w_t\)</span> is the weighting of time step <span class="math notranslate nohighlight">\(t\)</span> (e.g. number of hours it represents)</p></li>
<li><p><span class="math notranslate nohighlight">\(\underline{G}_\star, \underline{F}_\star, \underline{E}_\star\)</span> are the minimum capacities per technology and location/connection.</p></li>
<li><p><span class="math notranslate nohighlight">\(\underline{G}_\star, \underline{F}_\star, \underline{E}_\star\)</span> are the maximum capacities per technology and location.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For a full reference to the optimisation problem description, see <a class="reference external" href="https://pypsa.readthedocs.io/en/latest/optimal_power_flow.html">https://pypsa.readthedocs.io/en/latest/optimal_power_flow.html</a></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you have not yet set up Python on your computer, you can execute this tutorial in your browser via <a class="reference external" href="https://colab.research.google.com/">Google Colab</a>. Click on the rocket in the top right corner and launch “Colab”. If that doesn’t work download the <code class="docutils literal notranslate"><span class="pre">.ipynb</span></code> file and import it in <a class="reference external" href="https://colab.research.google.com/">Google Colab</a>.</p>
<p>Then install the following packages by executing the following command in a Jupyter cell at the top of the notebook.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>!pip<span class="w"> </span>install<span class="w"> </span>pypsa<span class="w"> </span>pandas<span class="w"> </span>matplotlib<span class="w"> </span>highspy
</pre></div>
</div>
</div>
<p>First things first! We need a few packages for this tutorial:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pypsa</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s2">&quot;bmh&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="prerequisites-handling-technology-data-and-costs">
<h2>Prerequisites: handling technology data and costs<a class="headerlink" href="#prerequisites-handling-technology-data-and-costs" title="Link to this heading">#</a></h2>
<p>We maintain a database (<a class="github reference external" href="https://github.com/PyPSA/technology-data">PyPSA/technology-data</a>) which collects assumptions and projections for energy system technologies (such as costs, efficiencies, lifetimes, etc.) for given years, which we can load into a <code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code>. This requires some pre-processing to load (e.g. converting units, setting defaults, re-arranging dimensions):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">year</span> <span class="o">=</span> <span class="mi">2030</span>
<span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://raw.githubusercontent.com/PyPSA/technology-data/master/outputs/costs_</span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s2">.csv&quot;</span>
<span class="n">costs</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">costs</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">costs</span><span class="o">.</span><span class="n">unit</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s2">&quot;/kW&quot;</span><span class="p">),</span> <span class="s2">&quot;value&quot;</span><span class="p">]</span> <span class="o">*=</span> <span class="mf">1e3</span>
<span class="n">costs</span><span class="o">.</span><span class="n">unit</span> <span class="o">=</span> <span class="n">costs</span><span class="o">.</span><span class="n">unit</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;/kW&quot;</span><span class="p">,</span> <span class="s2">&quot;/MW&quot;</span><span class="p">)</span>

<span class="n">defaults</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;FOM&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;VOM&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;efficiency&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;fuel&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;investment&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;lifetime&quot;</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span>
    <span class="s2">&quot;CO2 intensity&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;discount rate&quot;</span><span class="p">:</span> <span class="mf">0.07</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">costs</span> <span class="o">=</span> <span class="n">costs</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">unstack</span><span class="p">()</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">defaults</span><span class="p">)</span>

<span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="s2">&quot;OCGT&quot;</span><span class="p">,</span> <span class="s2">&quot;fuel&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="s2">&quot;gas&quot;</span><span class="p">,</span> <span class="s2">&quot;fuel&quot;</span><span class="p">]</span>
<span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="s2">&quot;CCGT&quot;</span><span class="p">,</span> <span class="s2">&quot;fuel&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="s2">&quot;gas&quot;</span><span class="p">,</span> <span class="s2">&quot;fuel&quot;</span><span class="p">]</span>
<span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="s2">&quot;OCGT&quot;</span><span class="p">,</span> <span class="s2">&quot;CO2 intensity&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="s2">&quot;gas&quot;</span><span class="p">,</span> <span class="s2">&quot;CO2 intensity&quot;</span><span class="p">]</span>
<span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="s2">&quot;CCGT&quot;</span><span class="p">,</span> <span class="s2">&quot;CO2 intensity&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="s2">&quot;gas&quot;</span><span class="p">,</span> <span class="s2">&quot;CO2 intensity&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>Let’s also write a small utility function that calculates the <strong>annuity</strong> to annualise investment costs. The formula is</p>
<div class="math notranslate nohighlight">
\[
a(r, n) = \frac{r}{1-(1+r)^{-n}}
\]</div>
<p>where <span class="math notranslate nohighlight">\(r\)</span> is the discount rate and <span class="math notranslate nohighlight">\(n\)</span> is the lifetime.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">annuity</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">r</span> <span class="o">/</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">-</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">+</span> <span class="n">r</span><span class="p">)</span> <span class="o">**</span> <span class="n">n</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">annuity</span><span class="p">(</span><span class="mf">0.07</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.09439292574325567
</pre></div>
</div>
</div>
</div>
<p>Based on this, we can calculate the short-term marginal generation costs (STMGC, €/MWh):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">costs</span><span class="p">[</span><span class="s2">&quot;marginal_cost&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">costs</span><span class="p">[</span><span class="s2">&quot;VOM&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">costs</span><span class="p">[</span><span class="s2">&quot;fuel&quot;</span><span class="p">]</span> <span class="o">/</span> <span class="n">costs</span><span class="p">[</span><span class="s2">&quot;efficiency&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>and the annualised investment costs (<code class="docutils literal notranslate"><span class="pre">capital_cost</span></code> in PyPSA terms, €/MW/a):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">annuity</span> <span class="o">=</span> <span class="n">costs</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">annuity</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s2">&quot;discount rate&quot;</span><span class="p">],</span> <span class="n">x</span><span class="p">[</span><span class="s2">&quot;lifetime&quot;</span><span class="p">]),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">costs</span><span class="p">[</span><span class="s2">&quot;capital_cost&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">annuity</span> <span class="o">+</span> <span class="n">costs</span><span class="p">[</span><span class="s2">&quot;FOM&quot;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">100</span><span class="p">)</span> <span class="o">*</span> <span class="n">costs</span><span class="p">[</span><span class="s2">&quot;investment&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="loading-time-series-data">
<h2>Loading time series data<a class="headerlink" href="#loading-time-series-data" title="Link to this heading">#</a></h2>
<p>We are also going to need some time series for wind, solar and load. For now, we are going to recycle the time series we used at the beginning of the course. They are given for Germany in the year 2015.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">url</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s2">&quot;https://tubcloud.tu-berlin.de/s/pKttFadrbTKSJKF/download/time-series-lecture-2.csv&quot;</span>
<span class="p">)</span>
<span class="n">ts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ts</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>load</th>
      <th>onwind</th>
      <th>offwind</th>
      <th>solar</th>
      <th>prices</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2015-01-01 00:00:00</th>
      <td>41.151</td>
      <td>0.1566</td>
      <td>0.7030</td>
      <td>0.0</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2015-01-01 01:00:00</th>
      <td>40.135</td>
      <td>0.1659</td>
      <td>0.6875</td>
      <td>0.0</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2015-01-01 02:00:00</th>
      <td>39.106</td>
      <td>0.1746</td>
      <td>0.6535</td>
      <td>0.0</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Let’s convert the load time series from GW to MW, the base unit of PyPSA:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ts</span><span class="o">.</span><span class="n">load</span> <span class="o">*=</span> <span class="mf">1e3</span>
</pre></div>
</div>
</div>
</div>
<p>We are also going to adapt the temporal resolution of the time series, e.g. sample only every other hour, to save some time:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">resolution</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">ts</span> <span class="o">=</span> <span class="n">ts</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">resolution</span><span class="si">}</span><span class="s2">h&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="simple-capacity-expansion-planning-example">
<h2>Simple capacity expansion planning example<a class="headerlink" href="#simple-capacity-expansion-planning-example" title="Link to this heading">#</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>See also <a class="reference external" href="https://model.energy">https://model.energy</a>.</p>
</div>
<p><strong>In this tutorial, we want to build a replica of <a class="reference external" href="https://model.energy">model.energy</a>.</strong> This tool calculates the cost of meeting a constant electricity demand from a combination of wind power, solar power and storage for different regions of the world.</p>
<p>We deviate from <a class="reference external" href="https://model.energy">model.energy</a> by including offshore wind generation and electricity demand profiles rather than a constant electricity demand. Also, we are going to start with Germany only. You can adapt the code to other countries as an exercise.</p>
<section id="model-initialisation">
<h3>Model Initialisation<a class="headerlink" href="#model-initialisation" title="Link to this heading">#</a></h3>
<p>For building the model, we start again by initialising an empty network.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span> <span class="o">=</span> <span class="n">pypsa</span><span class="o">.</span><span class="n">Network</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Then, we add a single bus…</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;Bus&quot;</span><span class="p">,</span> <span class="s2">&quot;electricity&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>…and tell the <code class="docutils literal notranslate"><span class="pre">pypsa.Network</span></code> object <code class="docutils literal notranslate"><span class="pre">n</span></code> what the snapshots of the model will be using the utility function <code class="docutils literal notranslate"><span class="pre">n.set_snapshots()</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">set_snapshots</span><span class="p">(</span><span class="n">ts</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">snapshots</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>DatetimeIndex([&#39;2015-01-01 00:00:00&#39;, &#39;2015-01-01 04:00:00&#39;,
               &#39;2015-01-01 08:00:00&#39;, &#39;2015-01-01 12:00:00&#39;,
               &#39;2015-01-01 16:00:00&#39;, &#39;2015-01-01 20:00:00&#39;,
               &#39;2015-01-02 00:00:00&#39;, &#39;2015-01-02 04:00:00&#39;,
               &#39;2015-01-02 08:00:00&#39;, &#39;2015-01-02 12:00:00&#39;,
               ...
               &#39;2015-12-30 08:00:00&#39;, &#39;2015-12-30 12:00:00&#39;,
               &#39;2015-12-30 16:00:00&#39;, &#39;2015-12-30 20:00:00&#39;,
               &#39;2015-12-31 00:00:00&#39;, &#39;2015-12-31 04:00:00&#39;,
               &#39;2015-12-31 08:00:00&#39;, &#39;2015-12-31 12:00:00&#39;,
               &#39;2015-12-31 16:00:00&#39;, &#39;2015-12-31 20:00:00&#39;],
              dtype=&#39;datetime64[ns]&#39;, name=&#39;snapshot&#39;, length=2190, freq=&#39;4h&#39;)
</pre></div>
</div>
</div>
</div>
<p>The weighting of the snapshots (e.g. how many hours they represent, see <span class="math notranslate nohighlight">\(w_t\)</span> in problem formulation above) can be set in <code class="docutils literal notranslate"><span class="pre">n.snapshot_weightings</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">snapshot_weightings</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>objective</th>
      <th>stores</th>
      <th>generators</th>
    </tr>
    <tr>
      <th>snapshot</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2015-01-01 00:00:00</th>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>2015-01-01 04:00:00</th>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>2015-01-01 08:00:00</th>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">snapshot_weightings</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">resolution</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">snapshot_weightings</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>objective</th>
      <th>stores</th>
      <th>generators</th>
    </tr>
    <tr>
      <th>snapshot</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2015-01-01 00:00:00</th>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>2015-01-01 04:00:00</th>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>2015-01-01 08:00:00</th>
      <td>4.0</td>
      <td>4.0</td>
      <td>4.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="adding-components">
<h3>Adding Components<a class="headerlink" href="#adding-components" title="Link to this heading">#</a></h3>
<p>Then, we add all the technologies we are going to include as carriers.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">carriers</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;onwind&quot;</span><span class="p">,</span>
    <span class="s2">&quot;offwind&quot;</span><span class="p">,</span>
    <span class="s2">&quot;solar&quot;</span><span class="p">,</span>
    <span class="s2">&quot;OCGT&quot;</span><span class="p">,</span>
    <span class="s2">&quot;hydrogen storage underground&quot;</span><span class="p">,</span>
    <span class="s2">&quot;battery storage&quot;</span><span class="p">,</span>
<span class="p">]</span>

<span class="n">n</span><span class="o">.</span><span class="n">madd</span><span class="p">(</span>
    <span class="s2">&quot;Carrier&quot;</span><span class="p">,</span>
    <span class="n">carriers</span><span class="p">,</span>
    <span class="n">color</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;dodgerblue&quot;</span><span class="p">,</span> <span class="s2">&quot;aquamarine&quot;</span><span class="p">,</span> <span class="s2">&quot;gold&quot;</span><span class="p">,</span> <span class="s2">&quot;indianred&quot;</span><span class="p">,</span> <span class="s2">&quot;magenta&quot;</span><span class="p">,</span> <span class="s2">&quot;yellowgreen&quot;</span><span class="p">],</span>
    <span class="n">co2_emissions</span><span class="o">=</span><span class="p">[</span><span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">c</span><span class="p">,</span> <span class="s2">&quot;CO2 intensity&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">carriers</span><span class="p">],</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Index([&#39;onwind&#39;, &#39;offwind&#39;, &#39;solar&#39;, &#39;OCGT&#39;, &#39;hydrogen storage underground&#39;,
       &#39;battery storage&#39;],
      dtype=&#39;object&#39;)
</pre></div>
</div>
</div>
</div>
<p>Next, we add the demand time series to the model.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
    <span class="s2">&quot;Load&quot;</span><span class="p">,</span>
    <span class="s2">&quot;demand&quot;</span><span class="p">,</span>
    <span class="n">bus</span><span class="o">=</span><span class="s2">&quot;electricity&quot;</span><span class="p">,</span>
    <span class="n">p_set</span><span class="o">=</span><span class="n">ts</span><span class="o">.</span><span class="n">load</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Let’s have a check whether the data was read-in correctly.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">loads_t</span><span class="o">.</span><span class="n">p_set</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;MW&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Axes: xlabel=&#39;snapshot&#39;, ylabel=&#39;MW&#39;&gt;
</pre></div>
</div>
<img alt="_images/2ecb24afeb17e3d6062206023a143c872603fefc81be0fb9f4b60f9914ee5a1e.png" src="_images/2ecb24afeb17e3d6062206023a143c872603fefc81be0fb9f4b60f9914ee5a1e.png" />
</div>
</div>
<p>We are going to add one dispatchable generation technology to the model. This is an open-cycle gas turbine (OCGT) with CO<span class="math notranslate nohighlight">\(_2\)</span> emissions of 0.2 t/MWh<span class="math notranslate nohighlight">\(_{th}\)</span>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
    <span class="s2">&quot;Generator&quot;</span><span class="p">,</span>
    <span class="s2">&quot;OCGT&quot;</span><span class="p">,</span>
    <span class="n">bus</span><span class="o">=</span><span class="s2">&quot;electricity&quot;</span><span class="p">,</span>
    <span class="n">carrier</span><span class="o">=</span><span class="s2">&quot;OCGT&quot;</span><span class="p">,</span>
    <span class="n">capital_cost</span><span class="o">=</span><span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="s2">&quot;OCGT&quot;</span><span class="p">,</span> <span class="s2">&quot;capital_cost&quot;</span><span class="p">],</span>
    <span class="n">marginal_cost</span><span class="o">=</span><span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="s2">&quot;OCGT&quot;</span><span class="p">,</span> <span class="s2">&quot;marginal_cost&quot;</span><span class="p">],</span>
    <span class="n">efficiency</span><span class="o">=</span><span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="s2">&quot;OCGT&quot;</span><span class="p">,</span> <span class="s2">&quot;efficiency&quot;</span><span class="p">],</span>
    <span class="n">p_nom_extendable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Adding the variable renewable generators works almost identically, but we also need to supply the capacity factors to the model via the attribute <code class="docutils literal notranslate"><span class="pre">p_max_pu</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">tech</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;onwind&quot;</span><span class="p">,</span> <span class="s2">&quot;offwind&quot;</span><span class="p">,</span> <span class="s2">&quot;solar&quot;</span><span class="p">]:</span>
    <span class="n">n</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
        <span class="s2">&quot;Generator&quot;</span><span class="p">,</span>
        <span class="n">tech</span><span class="p">,</span>
        <span class="n">bus</span><span class="o">=</span><span class="s2">&quot;electricity&quot;</span><span class="p">,</span>
        <span class="n">carrier</span><span class="o">=</span><span class="n">tech</span><span class="p">,</span>
        <span class="n">p_max_pu</span><span class="o">=</span><span class="n">ts</span><span class="p">[</span><span class="n">tech</span><span class="p">],</span>
        <span class="n">capital_cost</span><span class="o">=</span><span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">tech</span><span class="p">,</span> <span class="s2">&quot;capital_cost&quot;</span><span class="p">],</span>
        <span class="n">marginal_cost</span><span class="o">=</span><span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">tech</span><span class="p">,</span> <span class="s2">&quot;marginal_cost&quot;</span><span class="p">],</span>
        <span class="n">efficiency</span><span class="o">=</span><span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">tech</span><span class="p">,</span> <span class="s2">&quot;efficiency&quot;</span><span class="p">],</span>
        <span class="n">p_nom_extendable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>So let’s make sure the capacity factors are read-in correctly.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">generators_t</span><span class="o">.</span><span class="n">p_max_pu</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s2">&quot;2015-03&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;CF&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Axes: xlabel=&#39;snapshot&#39;, ylabel=&#39;CF&#39;&gt;
</pre></div>
</div>
<img alt="_images/95ca04d930d72104d7a7face9aa8c1abe3d941b5233a068c6b82379eec231283.png" src="_images/95ca04d930d72104d7a7face9aa8c1abe3d941b5233a068c6b82379eec231283.png" />
</div>
</div>
</section>
<section id="model-run">
<h3>Model Run<a class="headerlink" href="#model-run" title="Link to this heading">#</a></h3>
<p>Then, we can already solve the model for the first time. At this stage, the model does not have any storage or emission limits implemented. It’s going to look for the least-cost combination of variable renewables and the gas turbine to supply demand.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">optimize</span><span class="p">(</span><span class="n">solver_name</span><span class="o">=</span><span class="s2">&quot;highs&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>INFO:linopy.model: Solve problem using Highs solver
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>INFO:linopy.io: Writing time: 0.11s
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>INFO:linopy.solvers:Log file at /tmp/highs.log.
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>INFO:linopy.constants: Optimization successful: 
Status: ok
Termination condition: optimal
Solution: 8764 primals, 19714 duals
Objective: 3.16e+10
Solver model: available
Solver message: optimal
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/pypsa/optimization/optimize.py:357: FutureWarning:

A value is trying to be set on a copy of a DataFrame or Series through chained assignment using an inplace method.
The behavior will change in pandas 3.0. This inplace method will never work because the intermediate object on which we are setting values always behaves as a copy.

For example, when doing &#39;df[col].method(value, inplace=True)&#39;, try using &#39;df.method({col: value}, inplace=True)&#39; or df[col] = df[col].method(value) instead, to perform the operation inplace on the original object.



INFO:pypsa.optimization.optimize:The shadow-prices of the constraints Generator-ext-p-lower, Generator-ext-p-upper were not assigned to the network.
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Running HiGHS 1.5.3 [date: 2023-05-16, git hash: 594fa5a9d-dirty]
Copyright (c) 2023 HiGHS under MIT licence terms
Presolving model
9900 rows, 7714 cols, 23130 nonzeros
9900 rows, 7714 cols, 23130 nonzeros
Presolve : Reductions: rows 9900(-9814); columns 7714(-1050); elements 23130(-10864)
Solving the presolved LP
Using EKK dual simplex solver - serial
  Iteration        Objective     Infeasibilities num(sum)
          0     0.0000000000e+00 Pr: 2190(1.25606e+09) 0s
       7615     3.1624531941e+10 Pr: 0(0) 0s
Solving the original LP from the solution after postsolve
Model   status      : Optimal
Simplex   iterations: 7615
Objective value     :  3.1624531941e+10
HiGHS run time      :          0.15
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(&#39;ok&#39;, &#39;optimal&#39;)
</pre></div>
</div>
</div>
</div>
</section>
<section id="model-evaluation">
<h3>Model Evaluation<a class="headerlink" href="#model-evaluation" title="Link to this heading">#</a></h3>
<p>The total system cost in billion Euros per year:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">objective</span> <span class="o">/</span> <span class="mf">1e9</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>31.62453194099228
</pre></div>
</div>
</div>
</div>
<p>The optimised capacities in GW:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">generators</span><span class="o">.</span><span class="n">p_nom_opt</span><span class="o">.</span><span class="n">div</span><span class="p">(</span><span class="mf">1e3</span><span class="p">)</span>  <span class="c1"># GW</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Generator
OCGT       70.096357
onwind     -0.000000
offwind    49.326062
solar      85.967820
Name: p_nom_opt, dtype: float64
</pre></div>
</div>
</div>
</div>
<p>The total energy generation by technology in GW:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">snapshot_weightings</span><span class="o">.</span><span class="n">generators</span> <span class="o">@</span> <span class="n">n</span><span class="o">.</span><span class="n">generators_t</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">div</span><span class="p">(</span><span class="mf">1e6</span><span class="p">)</span>  <span class="c1"># TWh</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Generator
OCGT       235.778879
onwind       0.000000
offwind    150.379873
solar       92.766988
Name: generators, dtype: float64
</pre></div>
</div>
</div>
</div>
<p>While we get the objective value through <code class="docutils literal notranslate"><span class="pre">n.objective</span></code>, in many cases we want to know how the costs are distributed across the technologies. We can use the statistics module for this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">n</span><span class="o">.</span><span class="n">statistics</span><span class="o">.</span><span class="n">capex</span><span class="p">()</span> <span class="o">+</span> <span class="n">n</span><span class="o">.</span><span class="n">statistics</span><span class="o">.</span><span class="n">opex</span><span class="p">())</span><span class="o">.</span><span class="n">div</span><span class="p">(</span><span class="mf">1e6</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>component  carrier
Generator  OCGT       18596.014468
           offwind     8613.359135
           onwind              NaN
           solar       4415.158338
dtype: float64
</pre></div>
</div>
</div>
</div>
<p>Possibly, we are also interested in the total emissions:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">emissions</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">n</span><span class="o">.</span><span class="n">generators_t</span><span class="o">.</span><span class="n">p</span>
    <span class="o">/</span> <span class="n">n</span><span class="o">.</span><span class="n">generators</span><span class="o">.</span><span class="n">efficiency</span>
    <span class="o">*</span> <span class="n">n</span><span class="o">.</span><span class="n">generators</span><span class="o">.</span><span class="n">carrier</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">n</span><span class="o">.</span><span class="n">carriers</span><span class="o">.</span><span class="n">co2_emissions</span><span class="p">)</span>
<span class="p">)</span>  <span class="c1"># t/h</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">snapshot_weightings</span><span class="o">.</span><span class="n">generators</span> <span class="o">@</span> <span class="n">emissions</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">div</span><span class="p">(</span><span class="mf">1e6</span><span class="p">)</span>  <span class="c1"># Mt</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>113.86394645337052
</pre></div>
</div>
</div>
</div>
</section>
<section id="plotting-optimal-dispatch">
<h3>Plotting Optimal Dispatch<a class="headerlink" href="#plotting-optimal-dispatch" title="Link to this heading">#</a></h3>
<p>This function takes the network object <code class="docutils literal notranslate"><span class="pre">n</span></code> as an argument and, optionally, a time frame. We want to plot the load time series, and stacked area charts for electricity feed-in and storage charging. Technologies should be coloured by their color defined in <code class="docutils literal notranslate"><span class="pre">n.carriers</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">plot_dispatch</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="s2">&quot;2015-07&quot;</span><span class="p">):</span>
    <span class="n">p_by_carrier</span> <span class="o">=</span> <span class="n">n</span><span class="o">.</span><span class="n">generators_t</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">n</span><span class="o">.</span><span class="n">generators</span><span class="o">.</span><span class="n">carrier</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">div</span><span class="p">(</span><span class="mf">1e3</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">n</span><span class="o">.</span><span class="n">storage_units</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
        <span class="n">sto</span> <span class="o">=</span> <span class="n">n</span><span class="o">.</span><span class="n">storage_units_t</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">n</span><span class="o">.</span><span class="n">storage_units</span><span class="o">.</span><span class="n">carrier</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">div</span><span class="p">(</span><span class="mf">1e3</span><span class="p">)</span>
        <span class="n">p_by_carrier</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">p_by_carrier</span><span class="p">,</span> <span class="n">sto</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>

    <span class="n">color</span> <span class="o">=</span> <span class="n">p_by_carrier</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">n</span><span class="o">.</span><span class="n">carriers</span><span class="o">.</span><span class="n">color</span><span class="p">)</span>

    <span class="n">p_by_carrier</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">p_by_carrier</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">time</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">area</span><span class="p">(</span>
        <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
        <span class="n">linewidth</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">charge</span> <span class="o">=</span> <span class="n">p_by_carrier</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">p_by_carrier</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">how</span><span class="o">=</span><span class="s2">&quot;all&quot;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">time</span><span class="p">]</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">charge</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
        <span class="n">charge</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">area</span><span class="p">(</span>
            <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
            <span class="n">linewidth</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">color</span><span class="o">=</span><span class="n">charge</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">n</span><span class="o">.</span><span class="n">carriers</span><span class="o">.</span><span class="n">color</span><span class="p">),</span>
        <span class="p">)</span>

    <span class="n">n</span><span class="o">.</span><span class="n">loads_t</span><span class="o">.</span><span class="n">p_set</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">time</span><span class="p">]</span><span class="o">.</span><span class="n">div</span><span class="p">(</span><span class="mf">1e3</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s2">&quot;k&quot;</span><span class="p">)</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="p">(</span><span class="mf">1.05</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;GW&quot;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="o">-</span><span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Oje, that was complicated. Let’s test it:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plot_dispatch</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/tmp/ipykernel_2311/184362636.py:2: FutureWarning:

DataFrame.groupby with axis=1 is deprecated. Do `frame.T.groupby(...)` without axis instead.
</pre></div>
</div>
<img alt="_images/d94fe43884afc5f57d20a87699f01b9b8d9098f31de00ee988a828169b5bca60.png" src="_images/d94fe43884afc5f57d20a87699f01b9b8d9098f31de00ee988a828169b5bca60.png" />
</div>
</div>
</section>
</section>
<section id="adding-storage-units">
<h2>Adding Storage Units<a class="headerlink" href="#adding-storage-units" title="Link to this heading">#</a></h2>
<p>Alright, but there are a few important components missing for a system with high shares of renewables? What about short-term storage options (e.g. batteries) and long-term storage options (e.g. hydrogen storage)? Let’s add them too.</p>
<p>First, the battery storage. We are going to assume a fixed energy-to-power ratio of 6 hours, i.e. if fully charged, the battery can discharge at full capacity for 6 hours.
For the capital cost, we have to factor in both the capacity and energy cost of the storage. We are also going to enforce a cyclic state-of-charge condition, i.e. the state of charge
at the beginning of the optimisation period must equal the final state of charge.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
    <span class="s2">&quot;StorageUnit&quot;</span><span class="p">,</span>
    <span class="s2">&quot;battery storage&quot;</span><span class="p">,</span>
    <span class="n">bus</span><span class="o">=</span><span class="s2">&quot;electricity&quot;</span><span class="p">,</span>
    <span class="n">carrier</span><span class="o">=</span><span class="s2">&quot;battery storage&quot;</span><span class="p">,</span>
    <span class="n">max_hours</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span>
    <span class="n">capital_cost</span><span class="o">=</span><span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="s2">&quot;battery inverter&quot;</span><span class="p">,</span> <span class="s2">&quot;capital_cost&quot;</span><span class="p">]</span>
    <span class="o">+</span> <span class="mi">6</span> <span class="o">*</span> <span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="s2">&quot;battery storage&quot;</span><span class="p">,</span> <span class="s2">&quot;capital_cost&quot;</span><span class="p">],</span>
    <span class="n">efficiency_store</span><span class="o">=</span><span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="s2">&quot;battery inverter&quot;</span><span class="p">,</span> <span class="s2">&quot;efficiency&quot;</span><span class="p">],</span>
    <span class="n">efficiency_dispatch</span><span class="o">=</span><span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="s2">&quot;battery inverter&quot;</span><span class="p">,</span> <span class="s2">&quot;efficiency&quot;</span><span class="p">],</span>
    <span class="n">p_nom_extendable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">cyclic_state_of_charge</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Second, the hydrogen storage. This one is composed of an electrolysis to convert electricity to hydrogen, a fuel cell to re-convert hydrogen to electricity and underground storage (e.g. in salt caverns). We assume an energy-to-power ratio of 168 hours, such that this type of storage can be used for weekly balancing.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">capital_costs</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="s2">&quot;electrolysis&quot;</span><span class="p">,</span> <span class="s2">&quot;capital_cost&quot;</span><span class="p">]</span>
    <span class="o">+</span> <span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="s2">&quot;fuel cell&quot;</span><span class="p">,</span> <span class="s2">&quot;capital_cost&quot;</span><span class="p">]</span>
    <span class="o">+</span> <span class="mi">168</span> <span class="o">*</span> <span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="s2">&quot;hydrogen storage underground&quot;</span><span class="p">,</span> <span class="s2">&quot;capital_cost&quot;</span><span class="p">]</span>
<span class="p">)</span>

<span class="n">n</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
    <span class="s2">&quot;StorageUnit&quot;</span><span class="p">,</span>
    <span class="s2">&quot;hydrogen storage underground&quot;</span><span class="p">,</span>
    <span class="n">bus</span><span class="o">=</span><span class="s2">&quot;electricity&quot;</span><span class="p">,</span>
    <span class="n">carrier</span><span class="o">=</span><span class="s2">&quot;hydrogen storage underground&quot;</span><span class="p">,</span>
    <span class="n">max_hours</span><span class="o">=</span><span class="mi">168</span><span class="p">,</span>
    <span class="n">capital_cost</span><span class="o">=</span><span class="n">capital_costs</span><span class="p">,</span>
    <span class="n">efficiency_store</span><span class="o">=</span><span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="s2">&quot;electrolysis&quot;</span><span class="p">,</span> <span class="s2">&quot;efficiency&quot;</span><span class="p">],</span>
    <span class="n">efficiency_dispatch</span><span class="o">=</span><span class="n">costs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="s2">&quot;fuel cell&quot;</span><span class="p">,</span> <span class="s2">&quot;efficiency&quot;</span><span class="p">],</span>
    <span class="n">p_nom_extendable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">cyclic_state_of_charge</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Ok, lets run the again, now with storage, and see what’s changed.</p>
<div class="cell tag_hide-output docutils container">
<div class="cell_input above-output-prompt docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">optimize</span><span class="p">(</span><span class="n">solver_name</span><span class="o">=</span><span class="s2">&quot;highs&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<details class="hide below-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell output</span>
<span class="expanded">Hide code cell output</span>
</summary>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>INFO:linopy.model: Solve problem using Highs solver
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>INFO:linopy.io:Writing objective.
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Writing constraints.:   0%|          | 0/14 [00:00&lt;?, ?it/s]
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Writing constraints.:  57%|█████▋    | 8/14 [00:00&lt;00:00, 79.77it/s]
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Writing constraints.: 100%|██████████| 14/14 [00:00&lt;00:00, 61.95it/s]
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Writing continuous variables.:   0%|          | 0/6 [00:00&lt;?, ?it/s]
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Writing continuous variables.: 100%|██████████| 6/6 [00:00&lt;00:00, 155.50it/s]
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>INFO:linopy.io: Writing time: 0.28s
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>INFO:linopy.solvers:Log file at /tmp/highs.log.
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Running HiGHS 1.5.3 [date: 2023-05-16, git hash: 594fa5a9d-dirty]
Copyright (c) 2023 HiGHS under MIT licence terms
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>INFO:linopy.constants: Optimization successful: 
Status: ok
Termination condition: optimal
Solution: 21906 primals, 50376 duals
Objective: 3.16e+10
Solver model: available
Solver message: optimal
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/pypsa/optimization/optimize.py:357: FutureWarning:

A value is trying to be set on a copy of a DataFrame or Series through chained assignment using an inplace method.
The behavior will change in pandas 3.0. This inplace method will never work because the intermediate object on which we are setting values always behaves as a copy.

For example, when doing &#39;df[col].method(value, inplace=True)&#39;, try using &#39;df.method({col: value}, inplace=True)&#39; or df[col] = df[col].method(value) instead, to perform the operation inplace on the original object.



INFO:pypsa.optimization.optimize:The shadow-prices of the constraints Generator-ext-p-lower, Generator-ext-p-upper, StorageUnit-ext-p_dispatch-lower, StorageUnit-ext-p_dispatch-upper, StorageUnit-ext-p_store-lower, StorageUnit-ext-p_store-upper, StorageUnit-ext-state_of_charge-lower, StorageUnit-ext-state_of_charge-upper, StorageUnit-energy_balance were not assigned to the network.
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Presolving model
27420 rows, 20856 cols, 75690 nonzeros
27420 rows, 20856 cols, 75690 nonzeros
Presolve : Reductions: rows 27420(-22956); columns 20856(-1050); elements 75690(-24006)
Solving the presolved LP
Using EKK dual simplex solver - serial
  Iteration        Objective     Infeasibilities num(sum)
          0     0.0000000000e+00 Pr: 2190(1.54924e+09) 0s
      26273     3.1624531941e+10 Pr: 0(0); Du: 0(4.071e-13) 2s
Solving the original LP from the solution after postsolve
Model   status      : Optimal
Simplex   iterations: 26273
Objective value     :  3.1624531941e+10
HiGHS run time      :          2.24
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(&#39;ok&#39;, &#39;optimal&#39;)
</pre></div>
</div>
</div>
</details>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">generators</span><span class="o">.</span><span class="n">p_nom_opt</span>  <span class="c1"># MW</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Generator
OCGT       70096.356831
onwind        -0.000000
offwind    49326.061998
solar      85967.819687
Name: p_nom_opt, dtype: float64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">storage_units</span><span class="o">.</span><span class="n">p_nom_opt</span>  <span class="c1"># MW</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>StorageUnit
battery storage                -0.0
hydrogen storage underground   -0.0
Name: p_nom_opt, dtype: float64
</pre></div>
</div>
</div>
</div>
<p><strong>Nothing!</strong> The objective value is the same, and no storage is built.</p>
<section id="adding-emission-limits">
<h3>Adding emission limits<a class="headerlink" href="#adding-emission-limits" title="Link to this heading">#</a></h3>
<p>The gas power plant offers sufficient and cheap enough backup capacity to run in periods of low wind and solar generation. But what happens if this source of flexibility disappears. Let’s model a 100% renewable electricity system by adding a CO<span class="math notranslate nohighlight">\(_2\)</span> emission limit as global constraint:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
    <span class="s2">&quot;GlobalConstraint&quot;</span><span class="p">,</span>
    <span class="s2">&quot;CO2Limit&quot;</span><span class="p">,</span>
    <span class="n">carrier_attribute</span><span class="o">=</span><span class="s2">&quot;co2_emissions&quot;</span><span class="p">,</span>
    <span class="n">sense</span><span class="o">=</span><span class="s2">&quot;&lt;=&quot;</span><span class="p">,</span>
    <span class="n">constant</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>When we run the model now…</p>
<div class="cell tag_hide-output docutils container">
<div class="cell_input above-output-prompt docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">optimize</span><span class="p">(</span><span class="n">solver_name</span><span class="o">=</span><span class="s2">&quot;highs&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<details class="hide below-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell output</span>
<span class="expanded">Hide code cell output</span>
</summary>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>INFO:linopy.model: Solve problem using Highs solver
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>INFO:linopy.io:Writing objective.
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Writing constraints.:   0%|          | 0/15 [00:00&lt;?, ?it/s]
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Writing constraints.:  60%|██████    | 9/15 [00:00&lt;00:00, 81.88it/s]
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Writing constraints.: 100%|██████████| 15/15 [00:00&lt;00:00, 65.34it/s]
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Writing continuous variables.:   0%|          | 0/6 [00:00&lt;?, ?it/s]
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Writing continuous variables.: 100%|██████████| 6/6 [00:00&lt;00:00, 155.59it/s]
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>INFO:linopy.io: Writing time: 0.29s
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>INFO:linopy.solvers:Log file at /tmp/highs.log.
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Running HiGHS 1.5.3 [date: 2023-05-16, git hash: 594fa5a9d-dirty]
Copyright (c) 2023 HiGHS under MIT licence terms
Presolving model
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>INFO:linopy.constants: Optimization successful: 
Status: ok
Termination condition: optimal
Solution: 21906 primals, 50377 duals
Objective: 7.28e+10
Solver model: available
Solver message: optimal
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/pypsa/optimization/optimize.py:357: FutureWarning:

A value is trying to be set on a copy of a DataFrame or Series through chained assignment using an inplace method.
The behavior will change in pandas 3.0. This inplace method will never work because the intermediate object on which we are setting values always behaves as a copy.

For example, when doing &#39;df[col].method(value, inplace=True)&#39;, try using &#39;df.method({col: value}, inplace=True)&#39; or df[col] = df[col].method(value) instead, to perform the operation inplace on the original object.



INFO:pypsa.optimization.optimize:The shadow-prices of the constraints Generator-ext-p-lower, Generator-ext-p-upper, StorageUnit-ext-p_dispatch-lower, StorageUnit-ext-p_dispatch-upper, StorageUnit-ext-p_store-lower, StorageUnit-ext-p_store-upper, StorageUnit-ext-state_of_charge-lower, StorageUnit-ext-state_of_charge-upper, StorageUnit-energy_balance were not assigned to the network.
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>25230 rows, 18665 cols, 69120 nonzeros
25230 rows, 18665 cols, 69120 nonzeros
Presolve : Reductions: rows 25230(-25147); columns 18665(-3241); elements 69120(-32766)
Solving the presolved LP
Using EKK dual simplex solver - serial
  Iteration        Objective     Infeasibilities num(sum)
          0     0.0000000000e+00 Pr: 2190(1.44615e+09) 0s
      12329     1.9800946916e+10 Pr: 4598(5.58082e+12); Du: 0(3.59385e-08) 5s
      19984     7.2838284781e+10 Pr: 0(0); Du: 0(1.42109e-14) 8s
Solving the original LP from the solution after postsolve
Model   status      : Optimal
Simplex   iterations: 19984
Objective value     :  7.2838284781e+10
HiGHS run time      :          8.50
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(&#39;ok&#39;, &#39;optimal&#39;)
</pre></div>
</div>
</div>
</details>
</div>
<p>…and inspect the capacities built…</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">generators</span><span class="o">.</span><span class="n">p_nom_opt</span>  <span class="c1"># MW</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Generator
OCGT           -0.000000
onwind     238501.633267
offwind     77998.676273
solar      245669.862070
Name: p_nom_opt, dtype: float64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">storage_units</span><span class="o">.</span><span class="n">p_nom_opt</span>  <span class="c1"># MW</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>StorageUnit
battery storage                 33417.521270
hydrogen storage underground    59250.275573
Name: p_nom_opt, dtype: float64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">storage_units</span><span class="o">.</span><span class="n">p_nom_opt</span><span class="o">.</span><span class="n">div</span><span class="p">(</span><span class="mf">1e3</span><span class="p">)</span> <span class="o">*</span> <span class="n">n</span><span class="o">.</span><span class="n">storage_units</span><span class="o">.</span><span class="n">max_hours</span>  <span class="c1"># GWh</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>StorageUnit
battery storage                  200.505128
hydrogen storage underground    9954.046296
dtype: float64
</pre></div>
</div>
</div>
</div>
<p>… we see quite a bit of storage. So how does the optimised dispatch of the system look like?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plot_dispatch</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/tmp/ipykernel_2311/184362636.py:2: FutureWarning:

DataFrame.groupby with axis=1 is deprecated. Do `frame.T.groupby(...)` without axis instead.

/opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/pandas/plotting/_matplotlib/core.py:1794: UserWarning:

Attempting to set identical low and high ylims makes transformation singular; automatically expanding.
</pre></div>
</div>
<img alt="_images/cbfd5ad45b9f4bf4e5596c411b36980ed32cb30eebf2c43cb4f9ba0c71d9ae9f.png" src="_images/cbfd5ad45b9f4bf4e5596c411b36980ed32cb30eebf2c43cb4f9ba0c71d9ae9f.png" />
</div>
</div>
<p>We are also keen to see what technologies constitute the largest cost components. For that we’re going to define a small helper function:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">system_cost</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">tsc</span> <span class="o">=</span> <span class="n">n</span><span class="o">.</span><span class="n">statistics</span><span class="o">.</span><span class="n">capex</span><span class="p">()</span> <span class="o">+</span> <span class="n">n</span><span class="o">.</span><span class="n">statistics</span><span class="o">.</span><span class="n">opex</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">tsc</span><span class="o">.</span><span class="n">droplevel</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">div</span><span class="p">(</span><span class="mf">1e6</span><span class="p">)</span>  <span class="c1"># million €/a</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">system_cost</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>carrier
OCGT                                     NaN
offwind                         13620.214881
onwind                          24346.303004
solar                           12617.161281
battery storage                          NaN
hydrogen storage underground             NaN
dtype: float64
</pre></div>
</div>
</div>
</div>
<p>This series, we can then process into plots, e.g. a pie chart:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">system_cost</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">pie</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Axes: &gt;
</pre></div>
</div>
<img alt="_images/13238a259e1ef090f35a05764321e8e392544ceb944325edac75137fa8f9a9e0.png" src="_images/13238a259e1ef090f35a05764321e8e392544ceb944325edac75137fa8f9a9e0.png" />
</div>
</div>
<p>or use to compute the cost per unit of electricity consumed:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">demand</span> <span class="o">=</span> <span class="n">n</span><span class="o">.</span><span class="n">snapshot_weightings</span><span class="o">.</span><span class="n">generators</span> <span class="o">@</span> <span class="n">n</span><span class="o">.</span><span class="n">loads_t</span><span class="o">.</span><span class="n">p_set</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">system_cost</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">*</span> <span class="mf">1e6</span> <span class="o">/</span> <span class="n">demand</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>105.61904475056342
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span><span class="o">.</span><span class="n">export_to_netcdf</span><span class="p">(</span><span class="s2">&quot;network-new.nc&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>INFO:pypsa.io:Exported network network-new.nc has global_constraints, carriers, loads, storage_units, buses, generators
</pre></div>
</div>
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 404kB
Dimensions:                               (snapshots: 2190,
                                           investment_periods: 0,
                                           global_constraints_i: 1,
                                           carriers_i: 6, loads_i: 1,
                                           loads_t_p_set_i: 1, loads_t_p_i: 1,
                                           storage_units_i: 2,
                                           ...
                                           storage_units_t_state_of_charge_i: 2,
                                           buses_i: 1, buses_t_p_i: 1,
                                           buses_t_marginal_price_i: 1,
                                           generators_i: 4,
                                           generators_t_p_max_pu_i: 3,
                                           generators_t_p_i: 3)
Coordinates: (12/18)
  * snapshots                             (snapshots) int64 18kB 0 1 ... 2189
  * investment_periods                    (investment_periods) int64 0B 
  * global_constraints_i                  (global_constraints_i) object 8B &#x27;C...
  * carriers_i                            (carriers_i) object 48B &#x27;onwind&#x27; .....
  * loads_i                               (loads_i) object 8B &#x27;demand&#x27;
  * loads_t_p_set_i                       (loads_t_p_set_i) object 8B &#x27;demand&#x27;
    ...                                    ...
  * buses_i                               (buses_i) object 8B &#x27;electricity&#x27;
  * buses_t_p_i                           (buses_t_p_i) object 8B &#x27;electricity&#x27;
  * buses_t_marginal_price_i              (buses_t_marginal_price_i) object 8B ...
  * generators_i                          (generators_i) object 32B &#x27;OCGT&#x27; .....
  * generators_t_p_max_pu_i               (generators_t_p_max_pu_i) object 24B ...
  * generators_t_p_i                      (generators_t_p_i) object 24B &#x27;onwi...
Data variables: (12/37)
    snapshots_snapshot                    (snapshots) datetime64[ns] 18kB 201...
    snapshots_objective                   (snapshots) float64 18kB 4.0 ... 4.0
    snapshots_stores                      (snapshots) float64 18kB 4.0 ... 4.0
    snapshots_generators                  (snapshots) float64 18kB 4.0 ... 4.0
    investment_periods_objective          (investment_periods) object 0B 
    investment_periods_years              (investment_periods) object 0B 
    ...                                    ...
    generators_marginal_cost              (generators_i) float64 32B 64.68 .....
    generators_capital_cost               (generators_i) float64 32B 4.772e+0...
    generators_efficiency                 (generators_i) float64 32B 0.41 ......
    generators_p_nom_opt                  (generators_i) float64 32B -0.0 ......
    generators_t_p_max_pu                 (snapshots, generators_t_p_max_pu_i) float64 53kB ...
    generators_t_p                        (snapshots, generators_t_p_i) float64 53kB ...
Attributes:
    network__linearized_uc:  0
    network__multi_invest:   0
    network_name:            
    network_objective:       72838284780.62393
    network_pypsa_version:   0.27.1
    network_srid:            4326
    crs:                     {&quot;_crs&quot;: &quot;GEOGCRS[\&quot;WGS 84\&quot;,ENSEMBLE[\&quot;World Ge...
    meta:                    {}</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-94802914-e939-4fdc-bb63-df2c16ca6037' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-94802914-e939-4fdc-bb63-df2c16ca6037' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>snapshots</span>: 2190</li><li><span class='xr-has-index'>investment_periods</span>: 0</li><li><span class='xr-has-index'>global_constraints_i</span>: 1</li><li><span class='xr-has-index'>carriers_i</span>: 6</li><li><span class='xr-has-index'>loads_i</span>: 1</li><li><span class='xr-has-index'>loads_t_p_set_i</span>: 1</li><li><span class='xr-has-index'>loads_t_p_i</span>: 1</li><li><span class='xr-has-index'>storage_units_i</span>: 2</li><li><span class='xr-has-index'>storage_units_t_p_i</span>: 2</li><li><span class='xr-has-index'>storage_units_t_p_dispatch_i</span>: 2</li><li><span class='xr-has-index'>storage_units_t_p_store_i</span>: 2</li><li><span class='xr-has-index'>storage_units_t_state_of_charge_i</span>: 2</li><li><span class='xr-has-index'>buses_i</span>: 1</li><li><span class='xr-has-index'>buses_t_p_i</span>: 1</li><li><span class='xr-has-index'>buses_t_marginal_price_i</span>: 1</li><li><span class='xr-has-index'>generators_i</span>: 4</li><li><span class='xr-has-index'>generators_t_p_max_pu_i</span>: 3</li><li><span class='xr-has-index'>generators_t_p_i</span>: 3</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-2fdc8ab5-9351-40bf-9cb1-00d961b46ac6' class='xr-section-summary-in' type='checkbox'  checked><label for='section-2fdc8ab5-9351-40bf-9cb1-00d961b46ac6' class='xr-section-summary' >Coordinates: <span>(18)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>snapshots</span></div><div class='xr-var-dims'>(snapshots)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0 1 2 3 4 ... 2186 2187 2188 2189</div><input id='attrs-34ca7c50-c41b-4901-88af-9c2be206e785' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-34ca7c50-c41b-4901-88af-9c2be206e785' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-7fb7016c-0e6b-470c-8fb5-cbc8ede41d6e' class='xr-var-data-in' type='checkbox'><label for='data-7fb7016c-0e6b-470c-8fb5-cbc8ede41d6e' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([   0,    1,    2, ..., 2187, 2188, 2189])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>investment_periods</span></div><div class='xr-var-dims'>(investment_periods)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'></div><input id='attrs-9915c2ba-c762-456c-abe9-7c8adfc32154' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-9915c2ba-c762-456c-abe9-7c8adfc32154' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-5b59eb58-63f3-4408-9fb6-a0663900e28a' class='xr-var-data-in' type='checkbox'><label for='data-5b59eb58-63f3-4408-9fb6-a0663900e28a' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([], dtype=int64)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>global_constraints_i</span></div><div class='xr-var-dims'>(global_constraints_i)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>&#x27;CO2Limit&#x27;</div><input id='attrs-35a7f7bc-034e-4a72-92da-2ba61378b58d' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-35a7f7bc-034e-4a72-92da-2ba61378b58d' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-5b72d9d7-717e-42dc-a2f6-241cf8246766' class='xr-var-data-in' type='checkbox'><label for='data-5b72d9d7-717e-42dc-a2f6-241cf8246766' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;CO2Limit&#x27;], dtype=object)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>carriers_i</span></div><div class='xr-var-dims'>(carriers_i)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>&#x27;onwind&#x27; ... &#x27;battery storage&#x27;</div><input id='attrs-34be8e9c-f132-4c7c-9e05-e418f9df5797' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-34be8e9c-f132-4c7c-9e05-e418f9df5797' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-13180d7c-1ab4-48b7-84b4-868dd9bd75c5' class='xr-var-data-in' type='checkbox'><label for='data-13180d7c-1ab4-48b7-84b4-868dd9bd75c5' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;onwind&#x27;, &#x27;offwind&#x27;, &#x27;solar&#x27;, &#x27;OCGT&#x27;, &#x27;hydrogen storage underground&#x27;,
       &#x27;battery storage&#x27;], dtype=object)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>loads_i</span></div><div class='xr-var-dims'>(loads_i)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>&#x27;demand&#x27;</div><input id='attrs-6bb355a2-6d76-42e0-9e18-6d808e3708d9' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-6bb355a2-6d76-42e0-9e18-6d808e3708d9' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-16c66772-9f5e-4a1f-a997-a2b66884824b' class='xr-var-data-in' type='checkbox'><label for='data-16c66772-9f5e-4a1f-a997-a2b66884824b' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;demand&#x27;], dtype=object)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>loads_t_p_set_i</span></div><div class='xr-var-dims'>(loads_t_p_set_i)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>&#x27;demand&#x27;</div><input id='attrs-dfcd7388-2061-407b-8224-efbb7a290341' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-dfcd7388-2061-407b-8224-efbb7a290341' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-4d499b19-81af-4115-afb8-e95a4b5ca1ea' class='xr-var-data-in' type='checkbox'><label for='data-4d499b19-81af-4115-afb8-e95a4b5ca1ea' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;demand&#x27;], dtype=object)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>loads_t_p_i</span></div><div class='xr-var-dims'>(loads_t_p_i)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>&#x27;demand&#x27;</div><input id='attrs-1c705ef9-173a-4d55-b550-a4092e5a5b59' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-1c705ef9-173a-4d55-b550-a4092e5a5b59' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-bf4b1d12-5490-48d9-889f-019f67b011e5' class='xr-var-data-in' type='checkbox'><label for='data-bf4b1d12-5490-48d9-889f-019f67b011e5' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;demand&#x27;], dtype=object)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>storage_units_i</span></div><div class='xr-var-dims'>(storage_units_i)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>&#x27;battery storage&#x27; &#x27;hydrogen stor...</div><input id='attrs-3be33dcb-e419-448c-979a-3e4f87c35e72' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-3be33dcb-e419-448c-979a-3e4f87c35e72' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-2acc8b34-63bb-4a72-be53-d6665f330daa' class='xr-var-data-in' type='checkbox'><label for='data-2acc8b34-63bb-4a72-be53-d6665f330daa' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;battery storage&#x27;, &#x27;hydrogen storage underground&#x27;], dtype=object)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>storage_units_t_p_i</span></div><div class='xr-var-dims'>(storage_units_t_p_i)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>&#x27;battery storage&#x27; &#x27;hydrogen stor...</div><input id='attrs-3415aaca-0a5f-4a75-ab0c-c0475401b3eb' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-3415aaca-0a5f-4a75-ab0c-c0475401b3eb' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-b31b277d-a713-4ded-be19-397ce3e4981e' class='xr-var-data-in' type='checkbox'><label for='data-b31b277d-a713-4ded-be19-397ce3e4981e' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;battery storage&#x27;, &#x27;hydrogen storage underground&#x27;], dtype=object)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>storage_units_t_p_dispatch_i</span></div><div class='xr-var-dims'>(storage_units_t_p_dispatch_i)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>&#x27;battery storage&#x27; &#x27;hydrogen stor...</div><input id='attrs-f3515985-dc23-471e-bf2c-bcf0dc30a2d0' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-f3515985-dc23-471e-bf2c-bcf0dc30a2d0' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-73cc2e4d-52a0-404a-b121-eb5bcde3603c' class='xr-var-data-in' type='checkbox'><label for='data-73cc2e4d-52a0-404a-b121-eb5bcde3603c' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;battery storage&#x27;, &#x27;hydrogen storage underground&#x27;], dtype=object)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>storage_units_t_p_store_i</span></div><div class='xr-var-dims'>(storage_units_t_p_store_i)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>&#x27;battery storage&#x27; &#x27;hydrogen stor...</div><input id='attrs-e7c7d38a-0d15-4f04-8ac7-8f24f27eadf0' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-e7c7d38a-0d15-4f04-8ac7-8f24f27eadf0' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-e6b27c3b-22e6-4a54-9577-c940d24a8326' class='xr-var-data-in' type='checkbox'><label for='data-e6b27c3b-22e6-4a54-9577-c940d24a8326' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;battery storage&#x27;, &#x27;hydrogen storage underground&#x27;], dtype=object)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>storage_units_t_state_of_charge_i</span></div><div class='xr-var-dims'>(storage_units_t_state_of_charge_i)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>&#x27;battery storage&#x27; &#x27;hydrogen stor...</div><input id='attrs-2152e9d1-7beb-4587-9d3d-12c34c8ccd65' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-2152e9d1-7beb-4587-9d3d-12c34c8ccd65' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-854d77d0-6d4f-4216-86ab-b841209fb541' class='xr-var-data-in' type='checkbox'><label for='data-854d77d0-6d4f-4216-86ab-b841209fb541' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;battery storage&#x27;, &#x27;hydrogen storage underground&#x27;], dtype=object)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>buses_i</span></div><div class='xr-var-dims'>(buses_i)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>&#x27;electricity&#x27;</div><input id='attrs-f22e2dac-fefa-4dfa-a9e8-43458868db34' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-f22e2dac-fefa-4dfa-a9e8-43458868db34' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-3b03c4b3-f077-4d65-bd58-baca1f3517fd' class='xr-var-data-in' type='checkbox'><label for='data-3b03c4b3-f077-4d65-bd58-baca1f3517fd' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;electricity&#x27;], dtype=object)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>buses_t_p_i</span></div><div class='xr-var-dims'>(buses_t_p_i)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>&#x27;electricity&#x27;</div><input id='attrs-3741b87d-3d6f-45f0-a695-dcd67fe57b15' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-3741b87d-3d6f-45f0-a695-dcd67fe57b15' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-77c2040f-f5ea-4ec3-a913-1f0a25d56f60' class='xr-var-data-in' type='checkbox'><label for='data-77c2040f-f5ea-4ec3-a913-1f0a25d56f60' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;electricity&#x27;], dtype=object)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>buses_t_marginal_price_i</span></div><div class='xr-var-dims'>(buses_t_marginal_price_i)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>&#x27;electricity&#x27;</div><input id='attrs-18f5dcb7-1fb8-4a93-992d-f96bc4e4a7ec' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-18f5dcb7-1fb8-4a93-992d-f96bc4e4a7ec' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-b9d71009-7c77-40d8-9212-0e1907c9122b' class='xr-var-data-in' type='checkbox'><label for='data-b9d71009-7c77-40d8-9212-0e1907c9122b' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;electricity&#x27;], dtype=object)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>generators_i</span></div><div class='xr-var-dims'>(generators_i)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>&#x27;OCGT&#x27; &#x27;onwind&#x27; &#x27;offwind&#x27; &#x27;solar&#x27;</div><input id='attrs-53d6ceaf-1846-4554-90ab-c898ed289f34' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-53d6ceaf-1846-4554-90ab-c898ed289f34' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-5a9cff19-1c73-4e50-9eff-f670983ae251' class='xr-var-data-in' type='checkbox'><label for='data-5a9cff19-1c73-4e50-9eff-f670983ae251' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;OCGT&#x27;, &#x27;onwind&#x27;, &#x27;offwind&#x27;, &#x27;solar&#x27;], dtype=object)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>generators_t_p_max_pu_i</span></div><div class='xr-var-dims'>(generators_t_p_max_pu_i)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>&#x27;onwind&#x27; &#x27;offwind&#x27; &#x27;solar&#x27;</div><input id='attrs-7b2a90b2-30a3-4b43-a84a-644b25affafb' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-7b2a90b2-30a3-4b43-a84a-644b25affafb' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-1156c09a-0a65-49e8-9b9d-110bebe2cf0d' class='xr-var-data-in' type='checkbox'><label for='data-1156c09a-0a65-49e8-9b9d-110bebe2cf0d' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;onwind&#x27;, &#x27;offwind&#x27;, &#x27;solar&#x27;], dtype=object)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>generators_t_p_i</span></div><div class='xr-var-dims'>(generators_t_p_i)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>&#x27;onwind&#x27; &#x27;offwind&#x27; &#x27;solar&#x27;</div><input id='attrs-422a45b5-2ca6-4c9c-b91a-4bcaaa9efecb' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-422a45b5-2ca6-4c9c-b91a-4bcaaa9efecb' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-3de6fba6-4da8-4d7e-bf1a-2c61752b3d82' class='xr-var-data-in' type='checkbox'><label for='data-3de6fba6-4da8-4d7e-bf1a-2c61752b3d82' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;onwind&#x27;, &#x27;offwind&#x27;, &#x27;solar&#x27;], dtype=object)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-5aec8b77-69b3-483d-96a6-4cc08080a73d' class='xr-section-summary-in' type='checkbox'  ><label for='section-5aec8b77-69b3-483d-96a6-4cc08080a73d' class='xr-section-summary' >Data variables: <span>(37)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>snapshots_snapshot</span></div><div class='xr-var-dims'>(snapshots)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>2015-01-01 ... 2015-12-31T20:00:00</div><input id='attrs-73ce2928-f5f6-4a4d-84b9-b5e15c4f347e' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-73ce2928-f5f6-4a4d-84b9-b5e15c4f347e' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-e664467d-50d7-4ba3-9d53-2aa8d1a2ca77' class='xr-var-data-in' type='checkbox'><label for='data-e664467d-50d7-4ba3-9d53-2aa8d1a2ca77' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;2015-01-01T00:00:00.000000000&#x27;, &#x27;2015-01-01T04:00:00.000000000&#x27;,
       &#x27;2015-01-01T08:00:00.000000000&#x27;, ...,
       &#x27;2015-12-31T12:00:00.000000000&#x27;, &#x27;2015-12-31T16:00:00.000000000&#x27;,
       &#x27;2015-12-31T20:00:00.000000000&#x27;], dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>snapshots_objective</span></div><div class='xr-var-dims'>(snapshots)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>4.0 4.0 4.0 4.0 ... 4.0 4.0 4.0 4.0</div><input id='attrs-e72ecad9-f783-455d-8e86-cbb514185982' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-e72ecad9-f783-455d-8e86-cbb514185982' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-04086580-7948-4441-b9e8-29ff9298326c' class='xr-var-data-in' type='checkbox'><label for='data-04086580-7948-4441-b9e8-29ff9298326c' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([4., 4., 4., ..., 4., 4., 4.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>snapshots_stores</span></div><div class='xr-var-dims'>(snapshots)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>4.0 4.0 4.0 4.0 ... 4.0 4.0 4.0 4.0</div><input id='attrs-a5d64920-3f4e-465b-847c-1e5af53bd273' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-a5d64920-3f4e-465b-847c-1e5af53bd273' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-889f3c4f-cae9-42e4-9a6e-df0b8fc029c6' class='xr-var-data-in' type='checkbox'><label for='data-889f3c4f-cae9-42e4-9a6e-df0b8fc029c6' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([4., 4., 4., ..., 4., 4., 4.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>snapshots_generators</span></div><div class='xr-var-dims'>(snapshots)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>4.0 4.0 4.0 4.0 ... 4.0 4.0 4.0 4.0</div><input id='attrs-ed30c29c-0fbb-4ed8-8de3-6791e1e747b9' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-ed30c29c-0fbb-4ed8-8de3-6791e1e747b9' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-aaa858cf-3ca4-4a2a-af02-5039ca08aad9' class='xr-var-data-in' type='checkbox'><label for='data-aaa858cf-3ca4-4a2a-af02-5039ca08aad9' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([4., 4., 4., ..., 4., 4., 4.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>investment_periods_objective</span></div><div class='xr-var-dims'>(investment_periods)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'></div><input id='attrs-c77495f4-9c4c-4714-97df-4c1c85fd0b3e' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-c77495f4-9c4c-4714-97df-4c1c85fd0b3e' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c403e9e9-f0c1-4acf-8ddb-53831fe4f9a3' class='xr-var-data-in' type='checkbox'><label for='data-c403e9e9-f0c1-4acf-8ddb-53831fe4f9a3' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([], dtype=object)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>investment_periods_years</span></div><div class='xr-var-dims'>(investment_periods)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'></div><input id='attrs-e94c3319-2d37-4be8-8e66-503f6a8f9784' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-e94c3319-2d37-4be8-8e66-503f6a8f9784' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-0cbb52bc-9dc2-45bd-b724-247ecf426991' class='xr-var-data-in' type='checkbox'><label for='data-0cbb52bc-9dc2-45bd-b724-247ecf426991' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([], dtype=object)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>global_constraints_sense</span></div><div class='xr-var-dims'>(global_constraints_i)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>&#x27;&lt;=&#x27;</div><input id='attrs-6e733f7c-11b1-43d8-aca5-21138b8281f0' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-6e733f7c-11b1-43d8-aca5-21138b8281f0' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-49116cc1-495b-47d3-b5fc-897d6270a6c3' class='xr-var-data-in' type='checkbox'><label for='data-49116cc1-495b-47d3-b5fc-897d6270a6c3' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;&lt;=&#x27;], dtype=object)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>global_constraints_mu</span></div><div class='xr-var-dims'>(global_constraints_i)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-3.29e+03</div><input id='attrs-f725d3a7-bc70-4cf2-ab02-357d68d10cb6' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-f725d3a7-bc70-4cf2-ab02-357d68d10cb6' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-371bdc61-ee87-4eb3-b9a4-47a30e03ecaa' class='xr-var-data-in' type='checkbox'><label for='data-371bdc61-ee87-4eb3-b9a4-47a30e03ecaa' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([-3289.91615811])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>carriers_color</span></div><div class='xr-var-dims'>(carriers_i)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>&#x27;dodgerblue&#x27; ... &#x27;yellowgreen&#x27;</div><input id='attrs-c4bb4d77-4bd4-40eb-a9eb-a1463718d998' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-c4bb4d77-4bd4-40eb-a9eb-a1463718d998' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-74e23e8c-cfa0-47c5-b6be-852c2e7291c7' class='xr-var-data-in' type='checkbox'><label for='data-74e23e8c-cfa0-47c5-b6be-852c2e7291c7' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;dodgerblue&#x27;, &#x27;aquamarine&#x27;, &#x27;gold&#x27;, &#x27;indianred&#x27;, &#x27;magenta&#x27;,
       &#x27;yellowgreen&#x27;], dtype=object)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>carriers_co2_emissions</span></div><div class='xr-var-dims'>(carriers_i)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.0 0.0 0.0 0.198 0.0 0.0</div><input id='attrs-850d8818-a7c1-4bac-acd8-699d3d2b2a38' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-850d8818-a7c1-4bac-acd8-699d3d2b2a38' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-bd9b8e06-0737-4d0d-b391-148f6db32333' class='xr-var-data-in' type='checkbox'><label for='data-bd9b8e06-0737-4d0d-b391-148f6db32333' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([0.   , 0.   , 0.   , 0.198, 0.   , 0.   ])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>loads_bus</span></div><div class='xr-var-dims'>(loads_i)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>&#x27;electricity&#x27;</div><input id='attrs-582c70e9-be94-492b-b3f7-36a7bac383e2' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-582c70e9-be94-492b-b3f7-36a7bac383e2' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-8b7c5689-4db6-4c4e-8547-e832caaa90b0' class='xr-var-data-in' type='checkbox'><label for='data-8b7c5689-4db6-4c4e-8547-e832caaa90b0' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;electricity&#x27;], dtype=object)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>loads_t_p_set</span></div><div class='xr-var-dims'>(snapshots, loads_t_p_set_i)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>4.115e+04 3.894e+04 ... 4.591e+04</div><input id='attrs-e1d07959-ec26-48ae-b80f-773fbb1af6fd' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-e1d07959-ec26-48ae-b80f-773fbb1af6fd' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-f5fdd1f3-05ae-4442-98fa-78373d205ceb' class='xr-var-data-in' type='checkbox'><label for='data-f5fdd1f3-05ae-4442-98fa-78373d205ceb' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[41151.],
       [38941.],
       [42963.],
       ...,
       [50741.],
       [54645.],
       [45911.]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>loads_t_p</span></div><div class='xr-var-dims'>(snapshots, loads_t_p_i)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>4.115e+04 3.894e+04 ... 4.591e+04</div><input id='attrs-870d4d36-5ac3-45b8-af80-cd514df93122' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-870d4d36-5ac3-45b8-af80-cd514df93122' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-8e97a44f-90bc-4735-b87c-27304a1ede37' class='xr-var-data-in' type='checkbox'><label for='data-8e97a44f-90bc-4735-b87c-27304a1ede37' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[41151.],
       [38941.],
       [42963.],
       ...,
       [50741.],
       [54645.],
       [45911.]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>storage_units_bus</span></div><div class='xr-var-dims'>(storage_units_i)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>&#x27;electricity&#x27; &#x27;electricity&#x27;</div><input id='attrs-4ae01e45-5993-49a3-b2fe-04c1a65f5abc' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-4ae01e45-5993-49a3-b2fe-04c1a65f5abc' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-eccb3262-eaf6-4cd8-8ee2-9f398b9ea20e' class='xr-var-data-in' type='checkbox'><label for='data-eccb3262-eaf6-4cd8-8ee2-9f398b9ea20e' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;electricity&#x27;, &#x27;electricity&#x27;], dtype=object)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>storage_units_p_nom_extendable</span></div><div class='xr-var-dims'>(storage_units_i)</div><div class='xr-var-dtype'>bool</div><div class='xr-var-preview xr-preview'>True True</div><input id='attrs-9c90faa8-117f-403d-8581-73fef817eea9' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-9c90faa8-117f-403d-8581-73fef817eea9' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-df554567-00b2-4fba-861e-ef32deba4b7d' class='xr-var-data-in' type='checkbox'><label for='data-df554567-00b2-4fba-861e-ef32deba4b7d' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([ True,  True])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>storage_units_carrier</span></div><div class='xr-var-dims'>(storage_units_i)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>&#x27;battery storage&#x27; &#x27;hydrogen stor...</div><input id='attrs-0c91d5a5-939c-4334-ab27-e52e2e66952a' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-0c91d5a5-939c-4334-ab27-e52e2e66952a' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-e49dabf6-fffe-4f82-ab06-54d24cc58056' class='xr-var-data-in' type='checkbox'><label for='data-e49dabf6-fffe-4f82-ab06-54d24cc58056' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;battery storage&#x27;, &#x27;hydrogen storage underground&#x27;], dtype=object)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>storage_units_capital_cost</span></div><div class='xr-var-dims'>(storage_units_i)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.02e+05 3.18e+05</div><input id='attrs-e8487862-9dd7-4172-b697-1205a8216739' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-e8487862-9dd7-4172-b697-1205a8216739' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-833b223f-3d0f-4d15-91fc-3095cb63cb8f' class='xr-var-data-in' type='checkbox'><label for='data-833b223f-3d0f-4d15-91fc-3095cb63cb8f' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([102045.34925427, 318049.20405523])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>storage_units_cyclic_state_of_charge</span></div><div class='xr-var-dims'>(storage_units_i)</div><div class='xr-var-dtype'>bool</div><div class='xr-var-preview xr-preview'>True True</div><input id='attrs-c44ce134-340d-41e5-a541-4597d8227b77' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-c44ce134-340d-41e5-a541-4597d8227b77' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-2976e4c1-eb19-4feb-ba2b-a556b74dd1d9' class='xr-var-data-in' type='checkbox'><label for='data-2976e4c1-eb19-4feb-ba2b-a556b74dd1d9' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([ True,  True])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>storage_units_max_hours</span></div><div class='xr-var-dims'>(storage_units_i)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>6.0 168.0</div><input id='attrs-b6e321fe-dd05-4a86-b6a9-9dd7592bc532' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-b6e321fe-dd05-4a86-b6a9-9dd7592bc532' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-7f8035b8-f6f1-4b92-ad3a-ef42d34b9c7d' class='xr-var-data-in' type='checkbox'><label for='data-7f8035b8-f6f1-4b92-ad3a-ef42d34b9c7d' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([  6., 168.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>storage_units_efficiency_store</span></div><div class='xr-var-dims'>(storage_units_i)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.96 0.6217</div><input id='attrs-bb61a16f-ab0a-4989-b37d-9564d2763283' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-bb61a16f-ab0a-4989-b37d-9564d2763283' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-e107ad7e-472e-4fb0-b71d-0a339a84cb29' class='xr-var-data-in' type='checkbox'><label for='data-e107ad7e-472e-4fb0-b71d-0a339a84cb29' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([0.96  , 0.6217])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>storage_units_efficiency_dispatch</span></div><div class='xr-var-dims'>(storage_units_i)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.96 0.5</div><input id='attrs-d9f48ebd-ec20-4b12-84e0-2b702930af85' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-d9f48ebd-ec20-4b12-84e0-2b702930af85' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-1a0ce80f-9263-4667-8ef4-f4e6aa239d72' class='xr-var-data-in' type='checkbox'><label for='data-1a0ce80f-9263-4667-8ef4-f4e6aa239d72' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([0.96, 0.5 ])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>storage_units_p_nom_opt</span></div><div class='xr-var-dims'>(storage_units_i)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>3.342e+04 5.925e+04</div><input id='attrs-08665af3-0ee2-4c2b-83ac-be0bc89bcf94' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-08665af3-0ee2-4c2b-83ac-be0bc89bcf94' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-9685643c-449f-4f6f-a14b-b4e6fe1e3355' class='xr-var-data-in' type='checkbox'><label for='data-9685643c-449f-4f6f-a14b-b4e6fe1e3355' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([33417.52127008, 59250.27557329])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>storage_units_t_p</span></div><div class='xr-var-dims'>(snapshots, storage_units_t_p_i)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.0 -1.368e+04 0.0 ... 0.0 0.0 0.0</div><input id='attrs-f1d900f8-9f55-4d30-a752-1531248e3d78' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-f1d900f8-9f55-4d30-a752-1531248e3d78' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-fdf4e1a4-550a-4ce6-94df-68769ed66199' class='xr-var-data-in' type='checkbox'><label for='data-fdf4e1a4-550a-4ce6-94df-68769ed66199' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[     0.        , -13682.0694197 ],
       [     0.        , -17779.6373855 ],
       [     0.        , -28952.97168977],
       ...,
       [     0.        , -46904.35417978],
       [     0.        ,      0.        ],
       [     0.        ,      0.        ]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>storage_units_t_p_dispatch</span></div><div class='xr-var-dims'>(snapshots, storage_units_t_p_dispatch_i)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-0.0 -0.0 -0.0 ... -0.0 -0.0 -0.0</div><input id='attrs-3a8fec69-239c-4ba8-a977-48d675bb68b9' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-3a8fec69-239c-4ba8-a977-48d675bb68b9' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-e6c14e98-d511-492d-9862-ee21c94b9980' class='xr-var-data-in' type='checkbox'><label for='data-e6c14e98-d511-492d-9862-ee21c94b9980' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[-0., -0.],
       [-0., -0.],
       [-0., -0.],
       ...,
       [-0., -0.],
       [-0., -0.],
       [-0., -0.]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>storage_units_t_p_store</span></div><div class='xr-var-dims'>(snapshots, storage_units_t_p_store_i)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-0.0 1.368e+04 -0.0 ... -0.0 -0.0</div><input id='attrs-2eb8e3d3-105b-45da-871b-405a63b48bf3' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-2eb8e3d3-105b-45da-871b-405a63b48bf3' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-ff63ca90-d5c0-435a-a15a-f561805ec810' class='xr-var-data-in' type='checkbox'><label for='data-ff63ca90-d5c0-435a-a15a-f561805ec810' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[   -0.        , 13682.0694197 ],
       [   -0.        , 17779.6373855 ],
       [   -0.        , 28952.97168977],
       ...,
       [   -0.        , 46904.35417978],
       [   -0.        ,    -0.        ],
       [   -0.        ,    -0.        ]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>storage_units_t_state_of_charge</span></div><div class='xr-var-dims'>(snapshots, storage_units_t_state_of_charge_i)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.087e+05 6.064e+06 ... 6.03e+06</div><input id='attrs-427bc243-e91d-42d2-a5a5-0bed4eff77c2' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-427bc243-e91d-42d2-a5a5-0bed4eff77c2' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-b2012958-8bee-4881-9995-b3bfd8eb3e82' class='xr-var-data-in' type='checkbox'><label for='data-b2012958-8bee-4881-9995-b3bfd8eb3e82' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[ 108746.92872025, 6064333.93037324],
       [ 108746.92872025, 6108548.3326235 ],
       [ 108746.92872025, 6180548.58262161],
       ...,
       [ 108746.92872025, 6030309.36014032],
       [ 108746.92872025, 6030309.36014032],
       [ 108746.92872025, 6030309.36014032]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>buses_t_p</span></div><div class='xr-var-dims'>(snapshots, buses_t_p_i)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.0 0.0 -3.638e-12 ... 0.0 0.0 0.0</div><input id='attrs-9a418026-4d0c-4a5a-a274-da9f33927c6d' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-9a418026-4d0c-4a5a-a274-da9f33927c6d' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-e8f5fe88-372e-424d-b72b-51e52658ed1d' class='xr-var-data-in' type='checkbox'><label for='data-e8f5fe88-372e-424d-b72b-51e52658ed1d' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[ 0.00000000e+00],
       [ 0.00000000e+00],
       [-3.63797881e-12],
       ...,
       [ 0.00000000e+00],
       [ 0.00000000e+00],
       [ 0.00000000e+00]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>buses_t_marginal_price</span></div><div class='xr-var-dims'>(snapshots, buses_t_marginal_price_i)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.429 1.429 1.429 ... 1.429 1.429</div><input id='attrs-796848a7-1907-418a-a647-566f930f792c' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-796848a7-1907-418a-a647-566f930f792c' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c095604a-f63c-4233-bd35-bcd15842d2bc' class='xr-var-data-in' type='checkbox'><label for='data-c095604a-f63c-4233-bd35-bcd15842d2bc' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[1.4286],
       [1.4286],
       [1.4286],
       ...,
       [1.4286],
       [1.4286],
       [1.4286]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>generators_bus</span></div><div class='xr-var-dims'>(generators_i)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>&#x27;electricity&#x27; ... &#x27;electricity&#x27;</div><input id='attrs-002ba2d2-7605-4294-9878-9ffd90fc56de' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-002ba2d2-7605-4294-9878-9ffd90fc56de' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-b847ed76-de57-4221-93f8-d3658a37808d' class='xr-var-data-in' type='checkbox'><label for='data-b847ed76-de57-4221-93f8-d3658a37808d' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;electricity&#x27;, &#x27;electricity&#x27;, &#x27;electricity&#x27;, &#x27;electricity&#x27;],
      dtype=object)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>generators_p_nom_extendable</span></div><div class='xr-var-dims'>(generators_i)</div><div class='xr-var-dtype'>bool</div><div class='xr-var-preview xr-preview'>True True True True</div><input id='attrs-589f9c8a-074e-46f8-a0c9-e4c5c7f09e79' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-589f9c8a-074e-46f8-a0c9-e4c5c7f09e79' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-9475edbf-8f4c-4dd8-8e12-3cab06aa1ee6' class='xr-var-data-in' type='checkbox'><label for='data-9475edbf-8f4c-4dd8-8e12-3cab06aa1ee6' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([ True,  True,  True,  True])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>generators_carrier</span></div><div class='xr-var-dims'>(generators_i)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>&#x27;OCGT&#x27; &#x27;onwind&#x27; &#x27;offwind&#x27; &#x27;solar&#x27;</div><input id='attrs-34b70a19-c9e8-4988-b482-c4ce9b3c2c45' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-34b70a19-c9e8-4988-b482-c4ce9b3c2c45' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-4c297bd2-ec8f-4021-b498-3241fb8d4791' class='xr-var-data-in' type='checkbox'><label for='data-4c297bd2-ec8f-4021-b498-3241fb8d4791' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;OCGT&#x27;, &#x27;onwind&#x27;, &#x27;offwind&#x27;, &#x27;solar&#x27;], dtype=object)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>generators_marginal_cost</span></div><div class='xr-var-dims'>(generators_i)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>64.68 1.429 0.0212 0.0106</div><input id='attrs-badd5005-4e95-48fd-97e2-236339346d79' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-badd5005-4e95-48fd-97e2-236339346d79' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-b0bd49fe-e31e-4ab9-87ae-ea5999a614ed' class='xr-var-data-in' type='checkbox'><label for='data-b0bd49fe-e31e-4ab9-87ae-ea5999a614ed' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([6.46839512e+01, 1.42860000e+00, 2.12000000e-02, 1.06000000e-02])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>generators_capital_cost</span></div><div class='xr-var-dims'>(generators_i)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>4.772e+04 1.016e+05 ... 5.135e+04</div><input id='attrs-d22e0b27-a5bb-4644-bc4d-1b8a9be45cdf' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-d22e0b27-a5bb-4644-bc4d-1b8a9be45cdf' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-214475e6-d114-43e2-8cd3-7696bdf72299' class='xr-var-data-in' type='checkbox'><label for='data-214475e6-d114-43e2-8cd3-7696bdf72299' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([ 47718.6705637 , 101644.12332388, 174556.22307976,  51346.82981965])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>generators_efficiency</span></div><div class='xr-var-dims'>(generators_i)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.41 1.0 1.0 1.0</div><input id='attrs-23735f20-c7fa-4f5e-940d-11ca932e6328' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-23735f20-c7fa-4f5e-940d-11ca932e6328' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-a1cd75ab-2cb9-49c8-a36a-c5d8a570cbc0' class='xr-var-data-in' type='checkbox'><label for='data-a1cd75ab-2cb9-49c8-a36a-c5d8a570cbc0' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([0.41, 1.  , 1.  , 1.  ])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>generators_p_nom_opt</span></div><div class='xr-var-dims'>(generators_i)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-0.0 2.385e+05 7.8e+04 2.457e+05</div><input id='attrs-0e215b2c-6530-4032-977d-157f8573c3ab' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-0e215b2c-6530-4032-977d-157f8573c3ab' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-446cd199-7a6c-441a-81d4-b8c796b15a37' class='xr-var-data-in' type='checkbox'><label for='data-446cd199-7a6c-441a-81d4-b8c796b15a37' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([    -0.        , 238501.63326707,  77998.67627269, 245669.86207028])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>generators_t_p_max_pu</span></div><div class='xr-var-dims'>(snapshots, generators_t_p_max_pu_i)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.1566 0.703 0.0 ... 0.4023 0.0</div><input id='attrs-157d3042-1739-4b24-9c08-ba40ba6fba5b' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-157d3042-1739-4b24-9c08-ba40ba6fba5b' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-7f4d5fef-7c34-4c07-9a4f-0fc0e6547379' class='xr-var-data-in' type='checkbox'><label for='data-7f4d5fef-7c34-4c07-9a4f-0fc0e6547379' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[0.1566, 0.703 , 0.    ],
       [0.1826, 0.7272, 0.    ],
       [0.2281, 0.7828, 0.0442],
       ...,
       [0.2319, 0.7766, 0.1509],
       [0.1942, 0.5903, 0.    ],
       [0.1211, 0.4023, 0.    ]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>generators_t_p</span></div><div class='xr-var-dims'>(snapshots, generators_t_p_i)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-0.0 5.483e+04 ... 3.138e+04 -0.0</div><input id='attrs-e844a10e-7b6f-49d1-9228-539c005cf2ad' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-e844a10e-7b6f-49d1-9228-539c005cf2ad' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-720eb640-141b-40ec-8b24-c60d05a164ee' class='xr-var-data-in' type='checkbox'><label for='data-720eb640-141b-40ec-8b24-c60d05a164ee' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[   -0.        , 54833.0694197 ,    -0.        ],
       [   -0.        , 56720.6373855 ,    -0.        ],
       [   -0.        , 61057.36378626, 10858.60790351],
       ...,
       [   -0.        , 60573.77199337, 37071.5821864 ],
       [ 8602.38139623, 46042.61860377,    -0.        ],
       [14532.1325355 , 31378.8674645 ,    -0.        ]])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-1664c9fc-265d-4f5d-a81e-2531bee75d4a' class='xr-section-summary-in' type='checkbox'  ><label for='section-1664c9fc-265d-4f5d-a81e-2531bee75d4a' class='xr-section-summary' >Indexes: <span>(18)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>snapshots</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-d8b85b9d-bbe5-4273-9fe6-7db7bcc7b847' class='xr-index-data-in' type='checkbox'/><label for='index-d8b85b9d-bbe5-4273-9fe6-7db7bcc7b847' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(RangeIndex(start=0, stop=2190, step=1, name=&#x27;snapshots&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>investment_periods</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-e09161ca-17c6-4adb-a60f-24b854a4804e' class='xr-index-data-in' type='checkbox'/><label for='index-e09161ca-17c6-4adb-a60f-24b854a4804e' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(RangeIndex(start=0, stop=0, step=1, name=&#x27;investment_periods&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>global_constraints_i</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-9f13e7f5-5898-4213-8cc1-720b9f58c848' class='xr-index-data-in' type='checkbox'/><label for='index-9f13e7f5-5898-4213-8cc1-720b9f58c848' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([&#x27;CO2Limit&#x27;], dtype=&#x27;object&#x27;, name=&#x27;global_constraints_i&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>carriers_i</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-ccf18da1-7088-42e1-a707-02bd59dc354d' class='xr-index-data-in' type='checkbox'/><label for='index-ccf18da1-7088-42e1-a707-02bd59dc354d' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([&#x27;onwind&#x27;, &#x27;offwind&#x27;, &#x27;solar&#x27;, &#x27;OCGT&#x27;, &#x27;hydrogen storage underground&#x27;,
       &#x27;battery storage&#x27;],
      dtype=&#x27;object&#x27;, name=&#x27;carriers_i&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>loads_i</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-f837fc92-62b1-47ac-9f21-3209bb1abd55' class='xr-index-data-in' type='checkbox'/><label for='index-f837fc92-62b1-47ac-9f21-3209bb1abd55' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([&#x27;demand&#x27;], dtype=&#x27;object&#x27;, name=&#x27;loads_i&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>loads_t_p_set_i</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-4c309282-2e4c-4838-9361-f0ef9a4e33ba' class='xr-index-data-in' type='checkbox'/><label for='index-4c309282-2e4c-4838-9361-f0ef9a4e33ba' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([&#x27;demand&#x27;], dtype=&#x27;object&#x27;, name=&#x27;loads_t_p_set_i&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>loads_t_p_i</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-c7aeb16e-e6d2-4827-90a9-d259bea3d7a3' class='xr-index-data-in' type='checkbox'/><label for='index-c7aeb16e-e6d2-4827-90a9-d259bea3d7a3' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([&#x27;demand&#x27;], dtype=&#x27;object&#x27;, name=&#x27;loads_t_p_i&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>storage_units_i</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-3efc209c-e8a7-4063-a5e2-90d86c60a642' class='xr-index-data-in' type='checkbox'/><label for='index-3efc209c-e8a7-4063-a5e2-90d86c60a642' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([&#x27;battery storage&#x27;, &#x27;hydrogen storage underground&#x27;], dtype=&#x27;object&#x27;, name=&#x27;storage_units_i&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>storage_units_t_p_i</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-7d124303-285b-4461-81a2-cdd228b43b1b' class='xr-index-data-in' type='checkbox'/><label for='index-7d124303-285b-4461-81a2-cdd228b43b1b' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([&#x27;battery storage&#x27;, &#x27;hydrogen storage underground&#x27;], dtype=&#x27;object&#x27;, name=&#x27;storage_units_t_p_i&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>storage_units_t_p_dispatch_i</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-3a8c0ea5-8b40-4b74-a8ec-dc5196295c3d' class='xr-index-data-in' type='checkbox'/><label for='index-3a8c0ea5-8b40-4b74-a8ec-dc5196295c3d' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([&#x27;battery storage&#x27;, &#x27;hydrogen storage underground&#x27;], dtype=&#x27;object&#x27;, name=&#x27;storage_units_t_p_dispatch_i&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>storage_units_t_p_store_i</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-1c19d43a-5c96-4615-bb0e-0c39fc4b94a4' class='xr-index-data-in' type='checkbox'/><label for='index-1c19d43a-5c96-4615-bb0e-0c39fc4b94a4' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([&#x27;battery storage&#x27;, &#x27;hydrogen storage underground&#x27;], dtype=&#x27;object&#x27;, name=&#x27;storage_units_t_p_store_i&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>storage_units_t_state_of_charge_i</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-c2840645-713d-48b8-a515-80c468230859' class='xr-index-data-in' type='checkbox'/><label for='index-c2840645-713d-48b8-a515-80c468230859' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([&#x27;battery storage&#x27;, &#x27;hydrogen storage underground&#x27;], dtype=&#x27;object&#x27;, name=&#x27;storage_units_t_state_of_charge_i&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>buses_i</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-9fca75e1-a7aa-4157-a3b4-afcefc1850e7' class='xr-index-data-in' type='checkbox'/><label for='index-9fca75e1-a7aa-4157-a3b4-afcefc1850e7' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([&#x27;electricity&#x27;], dtype=&#x27;object&#x27;, name=&#x27;buses_i&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>buses_t_p_i</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-7d094734-9e81-4314-bd63-df531d1ab7e5' class='xr-index-data-in' type='checkbox'/><label for='index-7d094734-9e81-4314-bd63-df531d1ab7e5' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([&#x27;electricity&#x27;], dtype=&#x27;object&#x27;, name=&#x27;buses_t_p_i&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>buses_t_marginal_price_i</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-f9df1d9c-bc72-4f24-8d64-9c6f4e423296' class='xr-index-data-in' type='checkbox'/><label for='index-f9df1d9c-bc72-4f24-8d64-9c6f4e423296' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([&#x27;electricity&#x27;], dtype=&#x27;object&#x27;, name=&#x27;buses_t_marginal_price_i&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>generators_i</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-8426028a-b7b5-41bf-92bf-2e3a66996aa0' class='xr-index-data-in' type='checkbox'/><label for='index-8426028a-b7b5-41bf-92bf-2e3a66996aa0' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([&#x27;OCGT&#x27;, &#x27;onwind&#x27;, &#x27;offwind&#x27;, &#x27;solar&#x27;], dtype=&#x27;object&#x27;, name=&#x27;generators_i&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>generators_t_p_max_pu_i</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-34e04b29-2623-465c-b30b-a5615bb95954' class='xr-index-data-in' type='checkbox'/><label for='index-34e04b29-2623-465c-b30b-a5615bb95954' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([&#x27;onwind&#x27;, &#x27;offwind&#x27;, &#x27;solar&#x27;], dtype=&#x27;object&#x27;, name=&#x27;generators_t_p_max_pu_i&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>generators_t_p_i</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-528e9b8c-b36e-4cde-80a3-5a2f34472d7d' class='xr-index-data-in' type='checkbox'/><label for='index-528e9b8c-b36e-4cde-80a3-5a2f34472d7d' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([&#x27;onwind&#x27;, &#x27;offwind&#x27;, &#x27;solar&#x27;], dtype=&#x27;object&#x27;, name=&#x27;generators_t_p_i&#x27;))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-87f1650e-f97b-4ac9-beed-5aae416956dd' class='xr-section-summary-in' type='checkbox'  checked><label for='section-87f1650e-f97b-4ac9-beed-5aae416956dd' class='xr-section-summary' >Attributes: <span>(8)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>network__linearized_uc :</span></dt><dd>0</dd><dt><span>network__multi_invest :</span></dt><dd>0</dd><dt><span>network_name :</span></dt><dd></dd><dt><span>network_objective :</span></dt><dd>72838284780.62393</dd><dt><span>network_pypsa_version :</span></dt><dd>0.27.1</dd><dt><span>network_srid :</span></dt><dd>4326</dd><dt><span>crs :</span></dt><dd>{&quot;_crs&quot;: &quot;GEOGCRS[\&quot;WGS 84\&quot;,ENSEMBLE[\&quot;World Geodetic System 1984 ensemble\&quot;,MEMBER[\&quot;World Geodetic System 1984 (Transit)\&quot;],MEMBER[\&quot;World Geodetic System 1984 (G730)\&quot;],MEMBER[\&quot;World Geodetic System 1984 (G873)\&quot;],MEMBER[\&quot;World Geodetic System 1984 (G1150)\&quot;],MEMBER[\&quot;World Geodetic System 1984 (G1674)\&quot;],MEMBER[\&quot;World Geodetic System 1984 (G1762)\&quot;],MEMBER[\&quot;World Geodetic System 1984 (G2139)\&quot;],ELLIPSOID[\&quot;WGS 84\&quot;,6378137,298.257223563,LENGTHUNIT[\&quot;metre\&quot;,1]],ENSEMBLEACCURACY[2.0]],PRIMEM[\&quot;Greenwich\&quot;,0,ANGLEUNIT[\&quot;degree\&quot;,0.0174532925199433]],CS[ellipsoidal,2],AXIS[\&quot;geodetic latitude (Lat)\&quot;,north,ORDER[1],ANGLEUNIT[\&quot;degree\&quot;,0.0174532925199433]],AXIS[\&quot;geodetic longitude (Lon)\&quot;,east,ORDER[2],ANGLEUNIT[\&quot;degree\&quot;,0.0174532925199433]],USAGE[SCOPE[\&quot;Horizontal component of 3D system.\&quot;],AREA[\&quot;World.\&quot;],BBOX[-90,-180,90,180]],ID[\&quot;EPSG\&quot;,4326]]&quot;}</dd><dt><span>meta :</span></dt><dd>{}</dd></dl></div></li></ul></div></div></div></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Always consider, that the load data is given in units of power (MW) and if your resolution is not hourly, you need to multiply by the snapshot weighting to get the energy consumed!</p>
</div>
</section>
</section>
<section id="sensitivity-analysis">
<h2>Sensitivity Analysis<a class="headerlink" href="#sensitivity-analysis" title="Link to this heading">#</a></h2>
<p>Sensitivity analyses constitute a core activity of energy system modelling. Below, you can find sensitivity analyses regarding the</p>
<ol class="arabic simple">
<li><p>variation in allowed CO<span class="math notranslate nohighlight">\(_2\)</span> emissions</p></li>
<li><p>variation in solar overnight costs</p></li>
<li><p>variation in offshore wind potentials</p></li>
</ol>
<div class="cell tag_hide-output docutils container">
<div class="cell_input above-output-prompt docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sensitivity</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">co2</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">150</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">0</span><span class="p">]:</span>
    <span class="n">n</span><span class="o">.</span><span class="n">global_constraints</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s2">&quot;CO2Limit&quot;</span><span class="p">,</span> <span class="s2">&quot;constant&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">co2</span> <span class="o">*</span> <span class="mf">1e6</span>
    <span class="n">n</span><span class="o">.</span><span class="n">optimize</span><span class="p">(</span><span class="n">solver_name</span><span class="o">=</span><span class="s2">&quot;highs&quot;</span><span class="p">)</span>
    <span class="n">sensitivity</span><span class="p">[</span><span class="n">co2</span><span class="p">]</span> <span class="o">=</span> <span class="n">system_cost</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
</pre></div>
</div>
</div>
<details class="hide below-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell output</span>
<span class="expanded">Hide code cell output</span>
</summary>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>INFO:linopy.model: Solve problem using Highs solver
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>INFO:linopy.io:Writing objective.
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Writing constraints.:   0%|          | 0/15 [00:00&lt;?, ?it/s]
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Writing constraints.:  60%|██████    | 9/15 [00:00&lt;00:00, 81.12it/s]
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Writing constraints.: 100%|██████████| 15/15 [00:00&lt;00:00, 65.14it/s]
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Writing continuous variables.:   0%|          | 0/6 [00:00&lt;?, ?it/s]
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Writing continuous variables.: 100%|██████████| 6/6 [00:00&lt;00:00, 155.60it/s]
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>INFO:linopy.io: Writing time: 0.29s
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>INFO:linopy.solvers:Log file at /tmp/highs.log.
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Running HiGHS 1.5.3 [date: 2023-05-16, git hash: 594fa5a9d-dirty]
Copyright (c) 2023 HiGHS under MIT licence terms
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>INFO:linopy.constants: Optimization successful: 
Status: ok
Termination condition: optimal
Solution: 21906 primals, 50377 duals
Objective: 3.16e+10
Solver model: available
Solver message: optimal
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/pypsa/optimization/optimize.py:357: FutureWarning:

A value is trying to be set on a copy of a DataFrame or Series through chained assignment using an inplace method.
The behavior will change in pandas 3.0. This inplace method will never work because the intermediate object on which we are setting values always behaves as a copy.

For example, when doing &#39;df[col].method(value, inplace=True)&#39;, try using &#39;df.method({col: value}, inplace=True)&#39; or df[col] = df[col].method(value) instead, to perform the operation inplace on the original object.



INFO:pypsa.optimization.optimize:The shadow-prices of the constraints Generator-ext-p-lower, Generator-ext-p-upper, StorageUnit-ext-p_dispatch-lower, StorageUnit-ext-p_dispatch-upper, StorageUnit-ext-p_store-lower, StorageUnit-ext-p_store-upper, StorageUnit-ext-state_of_charge-lower, StorageUnit-ext-state_of_charge-upper, StorageUnit-energy_balance were not assigned to the network.
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Presolving model
27421 rows, 20856 cols, 77880 nonzeros
27421 rows, 20856 cols, 77880 nonzeros
Presolve : Reductions: rows 27421(-22956); columns 20856(-1050); elements 77880(-24006)
Solving the presolved LP
Using EKK dual simplex solver - serial
  Iteration        Objective     Infeasibilities num(sum)
          0     0.0000000000e+00 Pr: 2190(1.54924e+09) 0s
      26325     3.1624531941e+10 Pr: 0(0) 4s
Solving the original LP from the solution after postsolve
Model   status      : Optimal
Simplex   iterations: 26325
Objective value     :  3.1624531941e+10
HiGHS run time      :          4.05
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>INFO:linopy.model: Solve problem using Highs solver
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>INFO:linopy.io:Writing objective.
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Writing constraints.:   0%|          | 0/15 [00:00&lt;?, ?it/s]
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Writing constraints.:  60%|██████    | 9/15 [00:00&lt;00:00, 82.06it/s]
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Writing constraints.: 100%|██████████| 15/15 [00:00&lt;00:00, 65.49it/s]
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Writing continuous variables.:   0%|          | 0/6 [00:00&lt;?, ?it/s]
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Writing continuous variables.: 100%|██████████| 6/6 [00:00&lt;00:00, 155.89it/s]
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>INFO:linopy.io: Writing time: 0.29s
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>INFO:linopy.solvers:Log file at /tmp/highs.log.
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Running HiGHS 1.5.3 [date: 2023-05-16, git hash: 594fa5a9d-dirty]
Copyright (c) 2023 HiGHS under MIT licence terms
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>INFO:linopy.constants: Optimization successful: 
Status: ok
Termination condition: optimal
Solution: 21906 primals, 50377 duals
Objective: 3.18e+10
Solver model: available
Solver message: optimal
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/pypsa/optimization/optimize.py:357: FutureWarning:

A value is trying to be set on a copy of a DataFrame or Series through chained assignment using an inplace method.
The behavior will change in pandas 3.0. This inplace method will never work because the intermediate object on which we are setting values always behaves as a copy.

For example, when doing &#39;df[col].method(value, inplace=True)&#39;, try using &#39;df.method({col: value}, inplace=True)&#39; or df[col] = df[col].method(value) instead, to perform the operation inplace on the original object.



INFO:pypsa.optimization.optimize:The shadow-prices of the constraints Generator-ext-p-lower, Generator-ext-p-upper, StorageUnit-ext-p_dispatch-lower, StorageUnit-ext-p_dispatch-upper, StorageUnit-ext-p_store-lower, StorageUnit-ext-p_store-upper, StorageUnit-ext-state_of_charge-lower, StorageUnit-ext-state_of_charge-upper, StorageUnit-energy_balance were not assigned to the network.
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Presolving model
27421 rows, 20856 cols, 77880 nonzeros
27421 rows, 20856 cols, 77880 nonzeros
Presolve : Reductions: rows 27421(-22956); columns 20856(-1050); elements 77880(-24006)
Solving the presolved LP
Using EKK dual simplex solver - serial
  Iteration        Objective     Infeasibilities num(sum)
          0     0.0000000000e+00 Pr: 2190(1.54924e+09) 0s
      21410     3.0044451623e+10 Pr: 2374(7.03405e+09); Du: 0(8.7168e-07) 5s
      27874     3.1764091630e+10 Pr: 0(0); Du: 0(2.42029e-14) 8s
Solving the original LP from the solution after postsolve
Model   status      : Optimal
Simplex   iterations: 27874
Objective value     :  3.1764091630e+10
HiGHS run time      :          8.85
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>INFO:linopy.model: Solve problem using Highs solver
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>INFO:linopy.io:Writing objective.
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Writing constraints.:   0%|          | 0/15 [00:00&lt;?, ?it/s]
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Writing constraints.:  60%|██████    | 9/15 [00:00&lt;00:00, 80.66it/s]
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Writing constraints.: 100%|██████████| 15/15 [00:00&lt;00:00, 65.10it/s]
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Writing continuous variables.:   0%|          | 0/6 [00:00&lt;?, ?it/s]
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Writing continuous variables.: 100%|██████████| 6/6 [00:00&lt;00:00, 153.45it/s]
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>INFO:linopy.io: Writing time: 0.29s
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>INFO:linopy.solvers:Log file at /tmp/highs.log.
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Running HiGHS 1.5.3 [date: 2023-05-16, git hash: 594fa5a9d-dirty]
Copyright (c) 2023 HiGHS under MIT licence terms
Presolving model
27421 rows, 20856 cols, 77880 nonzeros
27421 rows, 20856 cols, 77880 nonzeros
Presolve : Reductions: rows 27421(-22956); columns 20856(-1050); elements 77880(-24006)
Solving the presolved LP
Using EKK dual simplex solver - serial
  Iteration        Objective     Infeasibilities num(sum)
          0     0.0000000000e+00 Pr: 2190(1.54924e+09) 0s
      13217     2.7613131005e+10 Pr: 9198(2.79115e+11); Du: 0(2.68615e-07) 5s
      20423     3.4262556011e+10 Pr: 9020(3.59587e+10); Du: 0(3.0732e-07) 10s
      24014     3.5768174048e+10 Pr: 0(0) 12s
      24014     3.5768174048e+10 Pr: 0(0) 12s
Solving the original LP from the solution after postsolve
Model   status      : Optimal
Simplex   iterations: 24014
Objective value     :  3.5768174048e+10
HiGHS run time      :         12.80
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>INFO:linopy.constants: Optimization successful: 
Status: ok
Termination condition: optimal
Solution: 21906 primals, 50377 duals
Objective: 3.58e+10
Solver model: available
Solver message: optimal
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/pypsa/optimization/optimize.py:357: FutureWarning:

A value is trying to be set on a copy of a DataFrame or Series through chained assignment using an inplace method.
The behavior will change in pandas 3.0. This inplace method will never work because the intermediate object on which we are setting values always behaves as a copy.

For example, when doing &#39;df[col].method(value, inplace=True)&#39;, try using &#39;df.method({col: value}, inplace=True)&#39; or df[col] = df[col].method(value) instead, to perform the operation inplace on the original object.



INFO:pypsa.optimization.optimize:The shadow-prices of the constraints Generator-ext-p-lower, Generator-ext-p-upper, StorageUnit-ext-p_dispatch-lower, StorageUnit-ext-p_dispatch-upper, StorageUnit-ext-p_store-lower, StorageUnit-ext-p_store-upper, StorageUnit-ext-state_of_charge-lower, StorageUnit-ext-state_of_charge-upper, StorageUnit-energy_balance were not assigned to the network.
</pre></div>
</div>
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">KeyboardInterrupt</span><span class="g g-Whitespace">                         </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">52</span><span class="p">],</span> <span class="n">line</span> <span class="mi">4</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="k">for</span> <span class="n">co2</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">150</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">0</span><span class="p">]:</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span>     <span class="n">n</span><span class="o">.</span><span class="n">global_constraints</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s2">&quot;CO2Limit&quot;</span><span class="p">,</span> <span class="s2">&quot;constant&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">co2</span> <span class="o">*</span> <span class="mf">1e6</span>
<span class="ne">----&gt; </span><span class="mi">4</span>     <span class="n">n</span><span class="o">.</span><span class="n">optimize</span><span class="p">(</span><span class="n">solver_name</span><span class="o">=</span><span class="s2">&quot;highs&quot;</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span>     <span class="n">sensitivity</span><span class="p">[</span><span class="n">co2</span><span class="p">]</span> <span class="o">=</span> <span class="n">system_cost</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/pypsa/optimization/optimize.py:604,</span> in <span class="ni">OptimizationAccessor.__call__</span><span class="nt">(self, *args, **kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">602</span> <span class="nd">@wraps</span><span class="p">(</span><span class="n">optimize</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">603</span> <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="ne">--&gt; </span><span class="mi">604</span>     <span class="k">return</span> <span class="n">optimize</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/pypsa/optimization/optimize.py:574,</span> in <span class="ni">optimize</span><span class="nt">(n, snapshots, multi_investment_periods, transmission_losses, linearized_unit_commitment, model_kwargs, extra_functionality, assign_all_duals, solver_name, solver_options, **kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">571</span> <span class="n">n</span><span class="o">.</span><span class="n">_linearized_uc</span> <span class="o">=</span> <span class="n">linearized_unit_commitment</span>
<span class="g g-Whitespace">    </span><span class="mi">573</span> <span class="n">n</span><span class="o">.</span><span class="n">consistency_check</span><span class="p">()</span>
<span class="ne">--&gt; </span><span class="mi">574</span> <span class="n">m</span> <span class="o">=</span> <span class="n">create_model</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">575</span>     <span class="n">n</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">576</span>     <span class="n">sns</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">577</span>     <span class="n">multi_investment_periods</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">578</span>     <span class="n">transmission_losses</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">579</span>     <span class="n">linearized_unit_commitment</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">580</span>     <span class="o">**</span><span class="n">model_kwargs</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">581</span> <span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">582</span> <span class="k">if</span> <span class="n">extra_functionality</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">583</span>     <span class="n">extra_functionality</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">sns</span><span class="p">)</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/pypsa/optimization/optimize.py:263,</span> in <span class="ni">create_model</span><span class="nt">(n, snapshots, multi_investment_periods, transmission_losses, linearized_unit_commitment, **kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">261</span> <span class="c1"># Define constraints</span>
<span class="g g-Whitespace">    </span><span class="mi">262</span> <span class="k">for</span> <span class="n">c</span><span class="p">,</span> <span class="n">attr</span> <span class="ow">in</span> <span class="n">lookup</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;nominal&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">263</span>     <span class="n">define_nominal_constraints_for_extendables</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">attr</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">264</span>     <span class="n">define_fixed_nominal_constraints</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">attr</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">265</span>     <span class="n">define_modular_constraints</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">attr</span><span class="p">)</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/pypsa/optimization/constraints.py:324,</span> in <span class="ni">define_nominal_constraints_for_extendables</span><span class="nt">(n, c, attr)</span>
<span class="g g-Whitespace">    </span><span class="mi">322</span> <span class="n">mask</span> <span class="o">=</span> <span class="n">upper</span> <span class="o">!=</span> <span class="n">inf</span>
<span class="g g-Whitespace">    </span><span class="mi">323</span> <span class="n">n</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">add_constraints</span><span class="p">(</span><span class="n">capacity</span><span class="p">,</span> <span class="s2">&quot;&gt;=&quot;</span><span class="p">,</span> <span class="n">lower</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">c</span><span class="si">}</span><span class="s2">-ext-</span><span class="si">{</span><span class="n">attr</span><span class="si">}</span><span class="s2">-lower&quot;</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">324</span> <span class="n">n</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">add_constraints</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">325</span>     <span class="n">capacity</span><span class="p">,</span> <span class="s2">&quot;&lt;=&quot;</span><span class="p">,</span> <span class="n">upper</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">c</span><span class="si">}</span><span class="s2">-ext-</span><span class="si">{</span><span class="n">attr</span><span class="si">}</span><span class="s2">-upper&quot;</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span>
<span class="g g-Whitespace">    </span><span class="mi">326</span> <span class="p">)</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/linopy/model.py:562,</span> in <span class="ni">Model.add_constraints</span><span class="nt">(self, lhs, sign, rhs, name, coords, mask)</span>
<span class="g g-Whitespace">    </span><span class="mi">560</span> <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">lhs</span><span class="p">,</span> <span class="p">(</span><span class="n">Variable</span><span class="p">,</span> <span class="n">ScalarVariable</span><span class="p">,</span> <span class="n">ScalarLinearExpression</span><span class="p">)):</span>
<span class="g g-Whitespace">    </span><span class="mi">561</span>     <span class="n">assert_sign_rhs_not_None</span><span class="p">(</span><span class="n">lhs</span><span class="p">,</span> <span class="n">sign</span><span class="p">,</span> <span class="n">rhs</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">562</span>     <span class="n">data</span> <span class="o">=</span> <span class="n">lhs</span><span class="o">.</span><span class="n">to_linexpr</span><span class="p">()</span><span class="o">.</span><span class="n">to_constraint</span><span class="p">(</span><span class="n">sign</span><span class="p">,</span> <span class="n">rhs</span><span class="p">)</span><span class="o">.</span><span class="n">data</span>
<span class="g g-Whitespace">    </span><span class="mi">563</span> <span class="k">else</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">564</span>     <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">565</span>         <span class="sa">f</span><span class="s2">&quot;Invalid type of `lhs` (</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">lhs</span><span class="p">)</span><span class="si">}</span><span class="s2">) or invalid combination of `lhs`, `sign` and `rhs`.&quot;</span>
<span class="g g-Whitespace">    </span><span class="mi">566</span>     <span class="p">)</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/linopy/expressions.py:934,</span> in <span class="ni">LinearExpression.to_constraint</span><span class="nt">(self, sign, rhs)</span>
<span class="g g-Whitespace">    </span><span class="mi">917</span> <span class="k">def</span> <span class="nf">to_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sign</span><span class="p">,</span> <span class="n">rhs</span><span class="p">):</span>
<span class="g g-Whitespace">    </span><span class="mi">918</span><span class="w">     </span><span class="sd">&quot;&quot;&quot;</span>
<span class="g g-Whitespace">    </span><span class="mi">919</span><span class="sd">     Convert a linear expression to a constraint.</span>
<span class="g g-Whitespace">    </span><span class="mi">920</span><span class="sd"> </span>
<span class="sd">   (...)</span>
<span class="g g-Whitespace">    </span><span class="mi">932</span><span class="sd">     to the right-hand side.</span>
<span class="g g-Whitespace">    </span><span class="mi">933</span><span class="sd">     &quot;&quot;&quot;</span>
<span class="ne">--&gt; </span><span class="mi">934</span>     <span class="n">all_to_lhs</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span> <span class="o">-</span> <span class="n">rhs</span><span class="p">)</span><span class="o">.</span><span class="n">data</span>
<span class="g g-Whitespace">    </span><span class="mi">935</span>     <span class="n">data</span> <span class="o">=</span> <span class="n">all_to_lhs</span><span class="p">[[</span><span class="s2">&quot;coeffs&quot;</span><span class="p">,</span> <span class="s2">&quot;vars&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">sign</span><span class="o">=</span><span class="n">sign</span><span class="p">,</span> <span class="n">rhs</span><span class="o">=-</span><span class="n">all_to_lhs</span><span class="o">.</span><span class="n">const</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">936</span>     <span class="k">return</span> <span class="n">constraints</span><span class="o">.</span><span class="n">Constraint</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">)</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/linopy/expressions.py:439,</span> in <span class="ni">LinearExpression.__sub__</span><span class="nt">(self, other)</span>
<span class="g g-Whitespace">    </span><span class="mi">436</span> <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">isscalar</span><span class="p">(</span><span class="n">other</span><span class="p">):</span>
<span class="g g-Whitespace">    </span><span class="mi">437</span>     <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">const</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">const</span> <span class="o">-</span> <span class="n">other</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">439</span> <span class="n">other</span> <span class="o">=</span> <span class="n">as_expression</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">,</span> <span class="n">dims</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">coord_dims</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">440</span> <span class="k">return</span> <span class="n">merge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="n">other</span><span class="p">,</span> <span class="bp">cls</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">)</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/linopy/expressions.py:1476,</span> in <span class="ni">as_expression</span><span class="nt">(obj, model, **kwargs)</span>
<span class="g g-Whitespace">   </span><span class="mi">1474</span> <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">1475</span>     <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Cannot convert to LinearExpression&quot;</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>
<span class="ne">-&gt; </span><span class="mi">1476</span> <span class="k">return</span> <span class="n">LinearExpression</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">model</span><span class="p">)</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/linopy/expressions.py:333,</span> in <span class="ni">LinearExpression.__init__</span><span class="nt">(self, data, model)</span>
<span class="g g-Whitespace">    </span><span class="mi">328</span> <span class="n">data</span><span class="p">[[</span><span class="s2">&quot;coeffs&quot;</span><span class="p">,</span> <span class="s2">&quot;vars&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">broadcast</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">329</span>     <span class="n">data</span><span class="p">[[</span><span class="s2">&quot;coeffs&quot;</span><span class="p">,</span> <span class="s2">&quot;vars&quot;</span><span class="p">]],</span> <span class="n">exclude</span><span class="o">=</span><span class="p">[</span><span class="n">FACTOR_DIM</span><span class="p">]</span>
<span class="g g-Whitespace">    </span><span class="mi">330</span> <span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="g g-Whitespace">    </span><span class="mi">332</span> <span class="c1"># transpose with new Dataset to really ensure correct order</span>
<span class="ne">--&gt; </span><span class="mi">333</span> <span class="n">data</span> <span class="o">=</span> <span class="n">Dataset</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">TERM_DIM</span><span class="p">))</span>
<span class="g g-Whitespace">    </span><span class="mi">335</span> <span class="c1"># ensure helper dimensions are not set as coordinates</span>
<span class="g g-Whitespace">    </span><span class="mi">336</span> <span class="k">if</span> <span class="n">drop_dims</span> <span class="o">:=</span> <span class="nb">set</span><span class="p">(</span><span class="n">HELPER_DIMS</span><span class="p">)</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">coords</span><span class="p">):</span>
<span class="g g-Whitespace">    </span><span class="mi">337</span>     <span class="c1"># TODO: add a warning here, routines should be safe against this</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/xarray/core/dataset.py:693,</span> in <span class="ni">Dataset.__init__</span><span class="nt">(self, data_vars, coords, attrs)</span>
<span class="g g-Whitespace">    </span><span class="mi">690</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">coords</span><span class="p">,</span> <span class="n">Dataset</span><span class="p">):</span>
<span class="g g-Whitespace">    </span><span class="mi">691</span>     <span class="n">coords</span> <span class="o">=</span> <span class="n">coords</span><span class="o">.</span><span class="n">_variables</span>
<span class="ne">--&gt; </span><span class="mi">693</span> <span class="n">variables</span><span class="p">,</span> <span class="n">coord_names</span><span class="p">,</span> <span class="n">dims</span><span class="p">,</span> <span class="n">indexes</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">merge_data_and_coords</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">694</span>     <span class="n">data_vars</span><span class="p">,</span> <span class="n">coords</span>
<span class="g g-Whitespace">    </span><span class="mi">695</span> <span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">697</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attrs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">attrs</span><span class="p">)</span> <span class="k">if</span> <span class="n">attrs</span> <span class="k">else</span> <span class="kc">None</span>
<span class="g g-Whitespace">    </span><span class="mi">698</span> <span class="bp">self</span><span class="o">.</span><span class="n">_close</span> <span class="o">=</span> <span class="kc">None</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/xarray/core/dataset.py:422,</span> in <span class="ni">merge_data_and_coords</span><span class="nt">(data_vars, coords)</span>
<span class="g g-Whitespace">    </span><span class="mi">418</span>     <span class="n">coords</span> <span class="o">=</span> <span class="n">create_coords_with_default_indexes</span><span class="p">(</span><span class="n">coords</span><span class="p">,</span> <span class="n">data_vars</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">420</span> <span class="c1"># exclude coords from alignment (all variables in a Coordinates object should</span>
<span class="g g-Whitespace">    </span><span class="mi">421</span> <span class="c1"># already be aligned together) and use coordinates&#39; indexes to align data_vars</span>
<span class="ne">--&gt; </span><span class="mi">422</span> <span class="k">return</span> <span class="n">merge_core</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">423</span>     <span class="p">[</span><span class="n">data_vars</span><span class="p">,</span> <span class="n">coords</span><span class="p">],</span>
<span class="g g-Whitespace">    </span><span class="mi">424</span>     <span class="n">compat</span><span class="o">=</span><span class="s2">&quot;broadcast_equals&quot;</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">425</span>     <span class="n">join</span><span class="o">=</span><span class="s2">&quot;outer&quot;</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">426</span>     <span class="n">explicit_coords</span><span class="o">=</span><span class="nb">tuple</span><span class="p">(</span><span class="n">coords</span><span class="p">),</span>
<span class="g g-Whitespace">    </span><span class="mi">427</span>     <span class="n">indexes</span><span class="o">=</span><span class="n">coords</span><span class="o">.</span><span class="n">xindexes</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">428</span>     <span class="n">priority_arg</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">429</span>     <span class="n">skip_align_args</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
<span class="g g-Whitespace">    </span><span class="mi">430</span> <span class="p">)</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/xarray/core/merge.py:691,</span> in <span class="ni">merge_core</span><span class="nt">(objects, compat, join, combine_attrs, priority_arg, explicit_coords, indexes, fill_value, skip_align_args)</span>
<span class="g g-Whitespace">    </span><span class="mi">687</span>     <span class="n">skip_align_args</span> <span class="o">=</span> <span class="p">[]</span>
<span class="g g-Whitespace">    </span><span class="mi">689</span> <span class="n">skip_align_objs</span> <span class="o">=</span> <span class="p">[(</span><span class="n">pos</span><span class="p">,</span> <span class="n">objects</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">pos</span><span class="p">))</span> <span class="k">for</span> <span class="n">pos</span> <span class="ow">in</span> <span class="n">skip_align_args</span><span class="p">]</span>
<span class="ne">--&gt; </span><span class="mi">691</span> <span class="n">coerced</span> <span class="o">=</span> <span class="n">coerce_pandas_values</span><span class="p">(</span><span class="n">objects</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">692</span> <span class="n">aligned</span> <span class="o">=</span> <span class="n">deep_align</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">693</span>     <span class="n">coerced</span><span class="p">,</span> <span class="n">join</span><span class="o">=</span><span class="n">join</span><span class="p">,</span> <span class="n">copy</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">indexes</span><span class="o">=</span><span class="n">indexes</span><span class="p">,</span> <span class="n">fill_value</span><span class="o">=</span><span class="n">fill_value</span>
<span class="g g-Whitespace">    </span><span class="mi">694</span> <span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">696</span> <span class="k">for</span> <span class="n">pos</span><span class="p">,</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">skip_align_objs</span><span class="p">:</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/xarray/core/merge.py:459,</span> in <span class="ni">coerce_pandas_values</span><span class="nt">(objects)</span>
<span class="g g-Whitespace">    </span><span class="mi">454</span>                     <span class="n">coord_names</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">coords</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">456</span>     <span class="k">return</span> <span class="n">coord_names</span><span class="p">,</span> <span class="n">noncoord_names</span>
<span class="ne">--&gt; </span><span class="mi">459</span> <span class="k">def</span> <span class="nf">coerce_pandas_values</span><span class="p">(</span><span class="n">objects</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">CoercibleMapping</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">DatasetLike</span><span class="p">]:</span>
<span class="g g-Whitespace">    </span><span class="mi">460</span><span class="w">     </span><span class="sd">&quot;&quot;&quot;Convert pandas values found in a list of labeled objects.</span>
<span class="g g-Whitespace">    </span><span class="mi">461</span><span class="sd"> </span>
<span class="g g-Whitespace">    </span><span class="mi">462</span><span class="sd">     Parameters</span>
<span class="sd">   (...)</span>
<span class="g g-Whitespace">    </span><span class="mi">471</span><span class="sd">     that were pandas objects have been converted into native xarray objects.</span>
<span class="g g-Whitespace">    </span><span class="mi">472</span><span class="sd">     &quot;&quot;&quot;</span>
<span class="g g-Whitespace">    </span><span class="mi">473</span>     <span class="kn">from</span> <span class="nn">xarray.core.coordinates</span> <span class="kn">import</span> <span class="n">Coordinates</span>

<span class="ne">KeyboardInterrupt</span>: 
</pre></div>
</div>
</div>
</details>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">sensitivity</span><span class="p">)</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">div</span><span class="p">(</span><span class="mf">1e3</span><span class="p">)</span>  <span class="c1"># billion Euro/a</span>
<span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">area</span><span class="p">(</span>
    <span class="n">stacked</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">linewidth</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">color</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">n</span><span class="o">.</span><span class="n">carriers</span><span class="o">.</span><span class="n">color</span><span class="p">),</span>
    <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
    <span class="n">xlim</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">150</span><span class="p">),</span>
    <span class="n">xlabel</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;CO$_2$ emissions [Mt/a]&quot;</span><span class="p">,</span>
    <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;System cost [bn€/a]&quot;</span><span class="p">,</span>
    <span class="n">ylim</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span>
<span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="p">(</span><span class="mf">1.05</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="exercises">
<h2>Exercises<a class="headerlink" href="#exercises" title="Link to this heading">#</a></h2>
<p>Explore the model by changing the assumptions and available technologies. Here are a few inspirations:</p>
<ul class="simple">
<li><p>Rerun the model with cost assumptions for 2050.</p></li>
<li><p>What if either hydrogen or battery storage cannot be expanded?</p></li>
<li><p>What if you can either only build solar or only build wind?</p></li>
<li><p>What if we had a flat electricity demand profile (like in <a class="reference external" href="https://model.energy">model.energy</a>, i.e. average the demand time series)?</p></li>
<li><p>Vary the energy-to-power ratio of the hydrogen storage. What ratio leads to lowest costs?</p></li>
<li><p>How bad is the 4-hourly resolution used for demonstration? How does it compare to hourly or 2-hourly resolution?</p></li>
<li><p>On <a class="reference external" href="https://model.energy">model.energy</a>, you can download capacity factors for onshore wind and solar for any region in the world. Drop offshore wind from the model and use the onshore wind and solar prices from another region of the world. Try a few. What changes?</p></li>
<li><p>Add nuclear as another dispatchable low-emission generation technology (similar to OCGT). Perform a sensitivity analysis trying to answer how low the capital cost of a nuclear plant would need to be to be chosen.</p></li>
</ul>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: ""
        },
        kernelOptions: {
            name: "",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = ''</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="09-workshop-pypsa.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Introduction to <code class="docutils literal notranslate"><span class="pre">pypsa</span></code></p>
      </div>
    </a>
    <a class="right-next"
       href="11-workshop-groupwork.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Preparation for Group Assignment</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#from-electricity-market-modelling-to-capacity-expansion-planning">From electricity market modelling to capacity expansion planning</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#prerequisites-handling-technology-data-and-costs">Prerequisites: handling technology data and costs</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#loading-time-series-data">Loading time series data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#simple-capacity-expansion-planning-example">Simple capacity expansion planning example</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#model-initialisation">Model Initialisation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-components">Adding Components</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#model-run">Model Run</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#model-evaluation">Model Evaluation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#plotting-optimal-dispatch">Plotting Optimal Dispatch</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-storage-units">Adding Storage Units</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-emission-limits">Adding emission limits</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#sensitivity-analysis">Sensitivity Analysis</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exercises">Exercises</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Fabian Neumann
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2022-2024.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>